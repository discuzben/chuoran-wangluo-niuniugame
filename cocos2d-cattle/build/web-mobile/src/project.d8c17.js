require=function i(a,l,s){function u(t,e){if(!l[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(r)return r(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var c=l[t]={exports:{}};a[t][0].call(c.exports,function(e){return u(a[t][1][e]||e)},c,c.exports,i,a,l,s)}return l[t].exports}for(var r="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({Audio:[function(e,t,o){"use strict";cc._RF.push(t,"8000cop7k9JspAJcqAS3lju","Audio"),cc.Class({extends:cc.Component,properties:{bgVolume:1,deskVolume:1,bgAudioID:-1},init:function(){var e;null!=(e=cc.sys.localStorage.getItem("bgVolume"))&&(this.bgVolume=parseFloat(e)),null!=(e=cc.sys.localStorage.getItem("deskVolume"))&&(this.deskVolume=parseFloat(e)),cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.audioEngine.resumeAll()})},getUrl:function(e){return cc.url.raw("resources/audio/"+e)},playBGM:function(e,t){var o=this.getUrl(e);0<=this.bgAudioID&&cc.audioEngine.stop(this.bgAudioID),null!=t&&this.setBGMVolume(t),this.bgAudioID=cc.audioEngine.play(o,!0,this.bgmVolume)},playSFX:function(e){var t=this.getUrl(e);if(0<this.deskVolume)cc.audioEngine.play(t,!1,this.deskVolume)},stopBGM:function(){0<=this.bgAudioID&&(cc.audioEngine.stop(this.bgAudioID),this.bgAudioID=null)},setSFXVolume:function(e){this.deskVolume!=e&&(cc.sys.localStorage.setItem("deskVolume",e),this.deskVolume=e)},getState:function(){return cc.audioEngine.getState(this.bgAudioID)},setBGMVolume:function(e,t){0<=this.bgAudioID&&(0<e&&cc.audioEngine.getState(this.bgAudioID)===cc.audioEngine.AudioState.PAUSED?cc.audioEngine.resume(this.bgAudioID):0==e&&cc.audioEngine.pause(this.bgAudioID)),(this.bgVolume!=e||t)&&(cc.sys.localStorage.setItem("bgVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgAudioID,e))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{}],Base64:[function(e,t,o){"use strict";cc._RF.push(t,"dfe07zhv1VA/aHhoA8yA/qC","Base64"),cc.Class({extends:cc.Component,properties:{},statics:{decode:function(e){var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],o=e.length,n=0;"="==e.charAt(o-1)&&("="==e.charAt(o-2)?(n=4,e=e.substring(0,o-2)):(n=2,e=e.substring(0,o-1)));for(var c=[],i=0,a=e.length;i<a;++i)for(var l=e.charAt(i),s=0,u=t.length;s<u;++s)if(l==t[s]){var r=this._toBinary(s),d=r.length;if(0<6-d)for(var p=6-d;0<p;--p)r.unshift(0);c=c.concat(r);break}0<n&&(c=c.slice(0,c.length-n));var h=[],f=[];for(i=0,a=c.length;i<a;)if(0==c[i])h=h.concat(this._toDecimal(c.slice(i,i+8))),i+=8;else{for(var m=0;i<a&&1==c[i];)++m,++i;for(f=f.concat(c.slice(i+1,i+8-m)),i+=8-m;1<m;)f=f.concat(c.slice(i+2,i+8)),i+=8,--m;h=h.concat(this._toDecimal(f)),f=[]}return h},_toBinary:function(e){for(var t=new Array;0<e;){var o=e%2;e=Math.floor(e/2),t.push(o)}return t.reverse(),t},_toDecimal:function(e){for(var t=0,o=0,n=e.length-1;0<=n;--n){1==e[n]&&(t+=Math.pow(2,o)),++o}return t}},onLoad:function(){}}),cc._RF.pop()},{}],EventStop:[function(e,t,o){"use strict";cc._RF.push(t,"05faf+0gV5LgaLLx2mFvDj7","EventStop"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()})}}),cc._RF.pop()},{}],audio:[function(e,t,o){"use strict";cc._RF.push(t,"10abevgjtxCUqsWHe1DKYxX","audio"),cc.Class({extends:cc.Component,properties:{cow0:{url:cc.AudioClip,default:null},cow1:{url:cc.AudioClip,default:null},cow2:{url:cc.AudioClip,default:null},cow3:{url:cc.AudioClip,default:null},cow4:{url:cc.AudioClip,default:null},cow5:{url:cc.AudioClip,default:null},cow6:{url:cc.AudioClip,default:null},cow7:{url:cc.AudioClip,default:null},cow8:{url:cc.AudioClip,default:null},cow9:{url:cc.AudioClip,default:null},cow10:{url:cc.AudioClip,default:null},cow11:{url:cc.AudioClip,default:null},cow12:{url:cc.AudioClip,default:null},cow13:{url:cc.AudioClip,default:null},cow14:{url:cc.AudioClip,default:null},dcollectgold:{url:cc.AudioClip,default:null},lampEnd:{url:cc.AudioClip,default:null},lampRun:{url:cc.AudioClip,default:null},betAll:{url:cc.AudioClip,default:null},betone:{url:cc.AudioClip,default:null},carddone1:{url:cc.AudioClip,default:null},carddone:{url:cc.AudioClip,default:null},collectgold:{url:cc.AudioClip,default:null},dealcard:{url:cc.AudioClip,default:null},gamestart:{url:cc.AudioClip,default:null},montageerror:{url:cc.AudioClip,default:null},pentakill:{url:cc.AudioClip,default:null},scrollnumber:{url:cc.AudioClip,default:null},sendcard:{url:cc.AudioClip,default:null},wingold:{url:cc.AudioClip,default:null},windowopen:{url:cc.AudioClip,default:null}},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],build_main:[function(e,t,o){"use strict";cc._RF.push(t,"627951+gx5EUYwR5fmwkGj8","build_main");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)};e("config"),window.GD=window.GlobalData={token:null,playerId:null,player:null,loginParams:null,exchangeRoomKey:null,current:{}},window.CD=window.ConstantData={gameTypes:{1:{name:"炸金花",gameId:30,gameSceneName:"glodenFlower",roomListScene:"roomList"},2:{name:"牛牛",gameId:50,gameSceneName:"cattle",roomListScene:"cattleChooseRoom"},3:{name:"德州扑克",gameId:70,gameSceneName:"holdem",roomListScene:"roomList"},4:{name:"斗地主",gameId:170,gameSceneName:"landload",roomListScene:"landloadRoomList"}}},window.__localStoreUtil__INSTANCE__=null;var c=function(){return null==window.__localStoreUtil__INSTANCE__&&(this.storeKey="CR_",this.init(),window.__localStoreUtil__INSTANCE__=this),window.__localStoreUtil__INSTANCE__};c.prototype={init:function(){this.localStorage=cc.sys.localStorage},set:function(e,t){if(t&&"object"==(void 0===t?"undefined":a(t)))try{t=JSON.stringify(t)}catch(e){return!1}return this.localStorage.setItem(this.storeKey+e,t),!0},get:function(e){var t=this.localStorage.getItem(this.storeKey+e);if("null"==t||"undefined"==t)t=null;else if(new RegExp("^[{|[]").test(t))try{t=JSON.parse(t)}catch(e){t=void 0}return t}},window.STORE=new c;var i={checkIsLogin:function(){return void 0!==STORE.get("USER")},compareUp:function(e,c){return"number"!=typeof e[0][c]?function(e,t){var o=e[c],n=t[c];return o.localeCompare(n)}:function(e,t){return e[c]-t[c]}},compareDown:function(e,n){return"number"!=typeof e[0][n]?function(e,t){var o=e[n];return t[n].localeCompare(o)}:function(e,t){var o=e[n];return t[n]-o}},uuid:function(e,t){var o,n,c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||c.length,e)for(o=0;o<e;o++)i[o]=c[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",o=0;o<36;o++)i[o]||(n=0|16*Math.random(),i[o]=c[19==o?3&n|8:n]);return i.join("")},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=new RegExp("(^|/)"+e+"/([^/]*)(/|$)","i"),n=window.location.search.substr(1).match(t),c=window.location.pathname.substr(1).match(o);return null!=n?unescape(n[2]):null!=c?unescape(c[2]):null}};window.MyUtil=i,window.__ccModal=null;var l=function(){if(window.__ccModal)return window.__ccModal;window.__ccModal=this};l.prototype._addButtons=function(e){var t=this.modalNode.getChildByName("btns"),c={};if(e&&t&&(t.children.forEach(function(e,t){c[e.name]=e}),e.buttons)){e.buttons.forEach(function(e,t){if(e.name&&null!=c[e.name]){var o=c[e.name];delete c[e.name],o.active=!0,s.setLabelString(o,"text",e.text||"");var n=o.getComponent(cc.Button);e.handler?n.clickEvents=[e.handler]:n.clickEvents=[]}})}for(var o in c)c[o].active=!1},l.prototype._modal=function(o,n,c,i){var a=this,l=this;(null==this.modalNode||this.modalNode&&0==this.modalNode.isValid)&&(this.modalNode=cc.find("modal")),this.modalNode&&0==this.modalNode.isValid&&(this.modalNode=null),this.modalloadCb=function(){var e=a.modalNode;s.setLabelString(e,"size/bg/container/text",o||""),e.active=!0,a._addButtons(i);var t=e.children[0]._components[0];t.unscheduleAllCallbacks(),null!=c&&0<c?t.schedule(function(){--c<=0&&(t.unscheduleAllCallbacks(),e.active=!1,n&&n())},1):n&&n()},null!=this.modalNode?l.modalloadCb():1!=l.isModalloading&&(l.isModalloading=!0,cc.loader.loadRes("public/modal",function(e,t){if(e)cc.error("loadRes - modal 失败",e.message||e);else if(t instanceof cc.Prefab){var o=cc.instantiate(t);o.parent=cc.director.getScene(),l.modalNode=o,l.isModalloading=!1,l.modalloadCb()}}))},l.prototype.close=function(e){this.modalNode&&(this.modalNode.active=!1)},l.prototype.loading=function(e,t){this._modal.apply(this,[e,null,null,t])},l.prototype.tip=function(e,t,o,n){this._modal.apply(this,[e,t,o||2,n])};var s={setSpriteFrame:function(e,t,o){var n=e.getComponent(cc.Sprite);null==n&&(n=e.addComponent(cc.Sprite)),n.spriteFrame=t.getSpriteFrame(o)},setLabelString:function(t,e,o){if(e)e.split("/").forEach(function(e){null!=t&&(t=t.getChildByName(e))});t&&(t.getComponent(cc.Label).string=null==o?"":o)},labelTimeout:function(t,e,o,n){if(e)e.split("/").forEach(function(e){t=t.getChildByName(e)});var c=t.getComponent(cc.Label);c||((c=t.addComponent(cc.Label)).string=""),c.unscheduleAllCallbacks();c.scheduleOnce(function(){c.unscheduleAllCallbacks(),n&&n()},o||1)},labelInterval:function(t,e,o,n){if(e)e.split("/").forEach(function(e){t=t.getChildByName(e)});var c=t.getComponent(cc.Label);c||((c=t.addComponent(cc.Label)).string=""),c.unscheduleAllCallbacks(),n&&n(o);c.schedule(function(){--o<=0&&c.unscheduleAllCallbacks(),n&&n(o)},1)},modalLoading:function(e,t){(new l).loading(e,t)},modalTip:function(e,t,o,n){(new l).tip(e,t,o,n)},closeModal:function(){(new l).close()}};window.ccUtil=s,window.__apiRequestPlugin__INSTANCE=null;var u=function(){return null==window.__apiRequestPlugin__INSTANCE&&(window.__apiRequestPlugin__INSTANCE=this),window.__apiRequestPlugin__INSTANCE};u.prototype={_postDataFormat:function(e,t){if(e&&"object"==(void 0===e?"undefined":a(e))){if("functionXXXX"==typeof FormData){var o=new FormData;for(var n in e)o.append(n,e[n]);return o}var c=new Array,i=0;for(var n in e)c[i]=encodeURIComponent(n)+"="+encodeURIComponent(e[n]),i++;return c.join("&")}},_requestData:function(e,t,o,n,c){o?o.token=GD.token:o={token:GD.token};var i=this._postDataFormat(o);"GET"==e.toUpperCase()&&(t+=(-1!=t.indexOf("?")?"&":"?")+i);var a=cc.loader.getXMLHttpRequest();"function"==typeof n&&(c=n,n=null),null==n&&(n=!0),this._streamXHREventsToLabel(a,c),a.open(e,t,n),cc.sys.isNative&&a.setRequestHeader("Accept-Encoding","gzip,deflate"),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.timeout=5e3,"GET"==e.toUpperCase()?a.send():a.send(i)},_streamXHREventsToLabel:function(t,e){var o=e||function(e,t,o){cc.log("请求结果：",t)};["loadstart","abort","error","load","loadend","timeout"].forEach(function(e){t["on"+e]=function(){}}),t.onreadystatechange=function(){if(4===t.readyState)if(200<=t.status&&t.status<300){var e=void 0;try{e=JSON.parse(t.responseText)}catch(e){}200==e.status?o(!0,e.result):o(!1,e.result)}else o(!1,"statusCode="+t.status)}},_dealPath:function(e){return-1==e.indexOf("http://")&&-1==e.indexOf("https://")&&(e=window.configData.apiServerUrl+e),e},get:function(e,t,o,n){var c=this._dealPath(e);this._requestData("GET",c,t,o,n)},put:function(e,t,o,n){var c=this._dealPath(e);this._requestData("PUT",c,t,o,n)},post:function(e,t,o,n){var c=this._dealPath(e);this._requestData("POST",c,t,o,n)},test_get:function(){this.get("/api/hello/getHello",null,function(e,t){1==e?cc.log("请求成功：",t):cc.log("请求失败：",t)})},test_post:function(){this.get("/api/hello/getHello2")}},window.apiRequestPlugin=u,window.API=new u,window._SocketIO_INSTANCE=window.ZR_IO=null,window.currentSocketRoomParams=null;var r=function(e,t){return null==window._SocketIO_INSTANCE&&(this.initSocketIo({url:window.configData.socketServer.url}),window._SocketIO_INSTANCE=this,window.currentSocketRoomParams=null),window.currentSocketRoomParams=e,window._SocketIO_INSTANCE.onReconnectCb(t),window.ZR_IO=window._SocketIO_INSTANCE,window._SocketIO_INSTANCE};r.prototype={initSocketIo:function(e){var t=arguments,o=this,n=!0,c=io.connect(e.url),i={};c.eventCb=function(e,t){t?i["event_"+e]=t:delete i["event_"+e]},c.myEmit=function(e,t){if(t&&t.constructor==Object){var o={emitName:e,data:t};c.emit("socket.io",o)}else alert("ERROR-传递的数据类型必须为Object")},c.on("socket.io-data",function(e){if(cc.log("socket.io-data",e),e.eventName&&i["event_"+e.eventName]){var t=e.data;i["event_"+e.eventName].call(null,t,t.__success)}}),c.on("connect",function(){cc.log("connect",o.reConnectFrom,n,a(o.reconnectCb)),"local"==o.reConnectFrom?o.reConnectFrom:0==n&&(n=!0,o.reconnectCb&&o.reconnectCb(!0))}),c.on("reconnect_attempt",function(){cc.log("reconnect_attempt",o.reConnectFrom,n),"local"==o.reConnectFrom||1==n&&(n=!1,s.modalLoading("socket服务连接断开"))}),c.on("reconnect",function(){cc.log("reconnect")}),c.on("reconnecting",function(){cc.log("reconnecting",t)}),c.on("reconnect_error",function(){cc.log("reconnect_error")}),c.on("reconnect_failed",function(){cc.log("reconnect_failed")}),c.on("ping",function(){cc.log("ping",new Date)}),c.on("pong",function(){cc.log("pong",new Date)}),this.socketIo=c},onReconnectCb:function(e){this.reconnectCb=e},joinRoom:function(e,t){var o=t||function(e){cc.log("join_room_done",e)};this.__emit("join_room",e,o,!0)},__emit:function(e,t,o,n){if(cc.info("socket-emit",e),"join_room"!=e||n){if(e){if(null==t&&(t={}),"function"==typeof t&&(o=t,t={}),t.playerId=GD.playerId,t.__hallItem=GD.current.hallItem,t.__gameRoomKey=GD.gameRoomKey,t.__token=GD.token,t.__exchangeRoomKey=GD.exchangeRoomKey,o){var c=e+"_"+Math.floor(1e4*Math.random());t.cbEventName=c,this.socketIo.eventCb(c,o)}this.socketIo.myEmit(e,t)}}else cc.error("join_room事件已作为为系统加入房间,请更换名称！！")},emit:function(e,t,o){this.__emit.apply(this,arguments)},on:function(e,t){cc.info("socket-on",e),e&&this.socketIo.eventCb(e,t)},reConnect:function(){this.reConnectFrom="local",this.socketIo.disconnect(),this.socketIo.connect()},destroy:function(){window._SocketIO_INSTANCE=window.ZR_IO=null,this.socketIo.destroy()},test_on:function(){this.on("emit-test",function(e){cc.log(e)})}},window.socketIoPlugin=r,window.initSocketIo=function(e,t){new r(e,t)},cc._RF.pop()},{config:"config"}],cattleGlobal:[function(e,t,o){"use strict";cc._RF.push(t,"f78ccWumA9G87fri4p4q9Ai","cattleGlobal"),t.exports={pokerPosiX:null,pokerPosiY:null,needscale:null,cointoposiX:null,cointoposiY:null},cc._RF.pop()},{}],cattleInit:[function(require,module,exports){"use strict";cc._RF.push(module,"64f853EBD5M8K64qb/Ahu92","cattleInit");var cattleGlobal=require("cattleGlobal"),odds=null,pokernumposi=[{x:-42,y:62}],userchooseposi=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],pokerposi=[{x:515,y:-379},{x:689,y:-379},{x:863,y:-379},{x:1037,y:-379},{x:1211,y:-379},{x:0,y:215},{x:60,y:215},{x:120,y:215},{x:180,y:215},{x:240,y:215},{x:796,y:473},{x:854,y:473},{x:912,y:473},{x:970,y:473},{x:1028,y:473},{x:1516,y:215},{x:1575,y:215},{x:1633,y:215},{x:1691,y:215},{x:1748,y:215}],coinposi=[{x:-783,y:-361},{x:-771,y:184},{x:-175,y:373},{x:773,y:181}],playerIds=[],exceptbanker=[],usertoken=[],pokerfacecount=0,pokerfaceclickcount=0,_clickpokertype=[],allcount=0,istrue=!1,coinindex=0;cc.Class({extends:cc.Component,properties:{userinfo:{default:[],type:cc.Node},roomKey:{default:null,type:cc.Node},chipinbtn:{default:null,type:cc.Node},snatchvillagebtn:{default:null,type:cc.Node},yxks:{default:null,type:cc.Node},ddk:{default:null,type:cc.Node},jsq01:{default:null,type:cc.Node},dxk:{default:null,type:cc.Node},tips:{default:null,type:cc.Node},countDown:{default:[],type:cc.Prefab},bankerOdds:{default:[],type:cc.Prefab},playerOdds:{default:[],type:cc.Prefab},pokerback:{default:null,type:cc.Prefab},pokers:{default:null,type:cc.Node},pokerchoose:{default:null,type:cc.Node},jxyx:{default:null,type:cc.Node},wc:{default:null,type:cc.Node},jsk:{default:null,type:cc.Node},bull:{default:null,type:cc.Node},pokerface:{default:[],type:cc.Prefab},pokernumhei:{default:[],type:cc.Prefab},pokernumhon:{default:[],type:cc.Prefab},bulltype:{default:[],type:cc.Prefab},winnum:{default:[],type:cc.Prefab},failnum:{default:[],type:cc.Prefab},ts:{default:null,type:cc.Node},tp:{default:null,type:cc.Node},audiosource:{default:null,type:cc.Node},coin:{default:null,type:cc.Prefab},coinani:{default:null,type:cc.Node},joinroom:{default:null,type:cc.Node},waitchipin:{default:null,type:cc.Node},mask:{default:[],type:cc.Node},an00:{default:null,type:cc.Node},menu:{default:null,type:cc.Node}},defaultscene:function(){this.snatchvillagebtn.active=!1,this.chipinbtn.active=!1,this.yxks.active=!1,this.dxk.active=!1,this.tips.active=!1,this.ddk.active=!1,this.jsq01.active=!1,this.jxyx.active=!1,this.jxyx.children[0].active=!1,this.jsk.active=!1,this.ts.active=!1,this.tp.active=!1,this.joinroom.active=!1,this.waitchipin.active=!1,this.jsk.getChildByName("ynbk").active=!1,this.jsk.getChildByName("mnbk").active=!1,this.menu.active=!1,this.an00.on(cc.Node.EventType.TOUCH_END,function(){istrue=!istrue,this.menu.active=istrue},this);for(var e=0;e<this.wc.children.length;e++)this.wc.children[e].active=!1;for(e=0;e<this.userinfo.length;e++)this.userinfo[e].getChildByName("ZJTX-01").active=!1;playerIds=[],exceptbanker=[],usertoken=[],istrue=!(_clickpokertype=[]),coinindex=allcount=pokerfaceclickcount=pokerfacecount=0},spawncountdown:function(e){this.jsq01.getChildByName("number").getComponent(cc.Label).string=e},spawnbankerOdds:function(e,t){null!=this.userinfo[e].getChildByName("chipinodd").children[0]&&this.userinfo[e].getChildByName("chipinodd").children[0].destroy();var o=cc.instantiate(this.bankerOdds[t]);this.userinfo[e].getChildByName("chipinodd").addChild(o)},spawnplayerOdds:function(e,t){null!=this.userinfo[e].getChildByName("chipinodd").children[0]&&this.userinfo[e].getChildByName("chipinodd").children[0].destroy();var o=cc.instantiate(this.playerOdds[t-1]);o.setPosition(userchooseposi[e].x,userchooseposi[e].y),this.userinfo[e].getChildByName("chipinodd").addChild(o)},spawnpokerback:function(){var e=cc.instantiate(this.pokerback);e.setPosition(1451,655),this.pokers.addChild(e)},spawnpokerface:function(t,o,n,c,i){var e=null,a=null;"spade"==t?(e=1,a=this.pokernumhei):"club"==t?(e=3,a=this.pokernumhei):"heart"==t?(e=2,a=this.pokernumhon):"diamond"==t?(e=0,a=this.pokernumhon):(e=1,a=this.pokernumhei,console.log("扑克牌面数据错误"));var l=cc.instantiate(this.pokerface[e]),s=null;0<=i&&i<=4?(l.scaleX=1.2,l.scaleY=1.2,s=11==o?"J":12==o?"Q":13==o?"K":o):(l.scaleX=1,l.scaleY=1);var u=cc.instantiate(a[o-1]);u.setPosition(pokernumposi[0].x,pokernumposi[0].y),l.addChild(u),l.setPosition(n,c),0<=i&&i<=5&&l.once(cc.Node.EventType.TOUCH_END,function(){if(this.jsk.children[pokerfaceclickcount].getComponent("cc.Label").string=s,pokerfaceclickcount++,l.destroy(),this.spawnpokerface(t,o,n,c+25,i),3<=pokerfaceclickcount){for(var e=0;e<3;e++)this.clickpokertype(this.jsk.children[e].getComponent("cc.Label").string);this.jsk.getChildByName("AN-yn").on(cc.Node.EventType.TOUCH_END,function(){null!=_clickpokertype[0]&&null!=_clickpokertype[1]&&null!=_clickpokertype[2]&&(this.jsk.children[3].getComponent("cc.Label").string=_clickpokertype[0]+_clickpokertype[1]+_clickpokertype[2],cc.audioEngine.play(this.audiosource.getComponent("audio").carddone,!1,1)),this.jsk.getChildByName("ynbk").active=!0,this.jsk.getChildByName("mnbk").active=!1},this),this.jsk.getChildByName("AN-mn").on(cc.Node.EventType.TOUCH_END,function(){this.jsk.getChildByName("ynbk").active=!1,this.jsk.getChildByName("mnbk").active=!0,cc.audioEngine.play(this.audiosource.getComponent("audio").carddone1,!1,1)},this),console.log("开始取消选牌监听事件");for(e=0;e<=5*playerIds.length;e++)this.pokers.children[e].targetOff(this)}},this),this.pokers.addChild(l)},clickpokertype:function(e){"J"==e?_clickpokertype.push(10):"Q"==e?_clickpokertype.push(10):"K"==e?_clickpokertype.push(10):_clickpokertype.push(e)},spawnbulltype:function(e,t){var o=cc.instantiate(this.bulltype[t]);this.bull.children[e].addChild(o)},spawnwinfailnum:function(e,t,o,n){var c=null;switch(t){case"+":case"-":c=10;break;case".":c=11;break;case"0":c=0;break;case"1":c=1;break;case"2":c=2;break;case"3":c=3;break;case"4":c=4;break;case"5":c=5;break;case"6":c=6;break;case"7":c=7;break;case"8":c=8;break;case"9":c=9;break;default:c=0}if("+"==e){var i=cc.instantiate(this.winnum[c]);this.userinfo[o].getChildByName("amount").children[n].addChild(i)}else if("-"==e){(i=cc.instantiate(this.failnum[c])).setPosition(-58,0),this.userinfo[o].getChildByName("amount").children[n].addChild(i),this.userinfo[o].getChildByName("amount").x=this.userinfo[o].getChildByName("amount").x+25,this.userinfo[o].getChildByName("amount").y=this.userinfo[o].getChildByName("amount").y}else{i=cc.instantiate(this.winnum[c]);this.userinfo[o].getChildByName("amount").children[n].addChild(i)}},dealpoker:function(){var e=0;this.schedule(function(){cattleGlobal.pokerPosiX=pokerposi[e].x,cattleGlobal.pokerPosiY=pokerposi[e].y,cattleGlobal.needscale=0<=e&&e<=4?1:null,this.spawnpokerback(),cc.audioEngine.play(this.audiosource.getComponent("audio").dealcard,!1,1),e++},.05,5*playerIds.length-1,0)},spawncoin:function(e,t){var o=cc.instantiate(this.coin);o.setPosition(e,t),this.coinani.addChild(o)},updateTime:function(e){this.jsq01.active=!0,allcount--,cc.audioEngine.play(this.audiosource.getComponent("audio").lampRun,!1,1),this.spawncountdown(allcount),allcount<=1&&this.schedule(function(){this.unschedule(this.updateTime),this.jsq01.active=!1,this.jsk.active=!1,cc.audioEngine.play(this.audiosource.getComponent("audio").lampEnd,!1,1)},.1,1,0)},myHandler:function(e){var t=new cc.Component.EventHandler;return t.target=cc.find("Canvas/script"),t.component="cattleInit",t.handler="handlerFunc",t.customEventData=e,t},handlerFunc:function(e,t){"back_hall"==t?this.back():"go_on"==t&&cc.director.loadScene(cc.director.getScene().getName())},matchingRoom:function(){ccUtil.modalTip("正在为您匹配牌桌\n游戏即将开始,请耐心等待",function(){cc.log("modal - tip")},3),ZR_IO.emit("matching_room",{})},onGameEvent:function onGameEvent(){var _this=this,self=this;ZR_IO.on("match_other",function(e,t){ccUtil.modalLoading(e.msg,{buttons:[{text:"返回大厅",handler:self.myHandler("back_hall")}]})}),ZR_IO.on("match_end",function(e,t){ccUtil.modalLoading(e.msg,{buttons:[{text:"返回大厅",handler:self.myHandler("back_hall")},{text:"继续匹配",handler:self.myHandler("go_on")}]})}),ZR_IO.on("game_unfinish",function(e,t){ccUtil.modalLoading(e.msg,{buttons:[{text:"返回大厅",handler:self.myHandler("back_hall")}]})}),ZR_IO.on("game_ready",function(e,t){t&&e.playerIds&&-1!=e.playerIds.indexOf(GD.playerId)&&(ZR_IO.emit("entering_room",{roomKey:e.roomKey}),playerIds=e.playerIds)}),ZR_IO.on("game_begin",function(t,e){if(e){GD.gameRoomKey=t.roomKey;var o=GD.playerId,n=playerIds.indexOf(o),c=playerIds[n];playerIds[n]=playerIds[0],playerIds[0]=c,_this.roomKey.getComponent("cc.Label").string=t.roomInfo.roomId;for(var i=function(){_this.userinfo[a].getChildByName("uid").getComponent("cc.Label").string=t.playersInfo[playerIds[a]].username,l=t.playersInfo[playerIds[a]].experience.toFixed(1),s=parseFloat(l),_this.userinfo[a].getChildByName("account").getComponent("cc.Label").string=s;var e=t.playersInfo[playerIds[a]].headimg,o=_this.mask[a].getChildByName("userhead");e&&cc.loader.load(e,function(e,t){if(t instanceof cc.Texture2D)try{o.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t,cc.Rect(0,0,129,129)),o.width=129,o.height=129}catch(e){cc.log("error",e)}})},a=0;a<playerIds.length;a++){var l,s;i()}for(a=0;a<playerIds.length;a++)usertoken.push(t.playersInfo[playerIds[a]].playerToken);ZR_IO.emit("game_begin",{}),_this.yxks.active=!0,cc.audioEngine.play(_this.audiosource.getComponent("audio").gamestart,!1,1);var u=cc.sequence(cc.show(),cc.scaleTo(.3,.5,.5),cc.delayTime(3),cc.hide());_this.yxks.runAction(u)}}),ZR_IO.on("banker_roll",function(e,t){console.log(e),t&&(_this.snatchvillagebtn.active=!0,allcount=e.timeout,_this.schedule(_this.updateTime,1,e.timeout,0),ccUtil.closeModal())}),ZR_IO.on("player_roll",function(e,t){if(t){_this.snatchvillagebtn.active=!1,_this.unschedule(_this.updateTime);var o=playerIds.indexOf(e.banker.playerId);_this.userinfo[o].getChildByName("ZJTX-01").active=!0,0==playerIds.indexOf(e.banker.playerId)?_this.waitchipin.active=!0:_this.chipinbtn.active=!0,_this.spawnbankerOdds(o,e.banker.odds);for(var n=0;n<playerIds.length;n++)exceptbanker.push(playerIds[n]);if(exceptbanker.splice(o,1),e.bankerChoose)for(n=0;n<exceptbanker.length;n++){var c=playerIds.indexOf(exceptbanker[n]);_this.spawnbankerOdds(c,e.bankerChoose[exceptbanker[n]].odds)}else for(n=0;n<exceptbanker.length;n++){c=playerIds.indexOf(exceptbanker[n]);_this.spawnbankerOdds(c,e.plasyer[exceptbanker[n]].odds)}_this.snatchvillagebtn.active=!1,_this.ddk.active=!1,allcount=e.timeout,_this.schedule(_this.updateTime,1,allcount,0)}}),ZR_IO.on("deal",function(data,status){if(status){_this.unschedule(_this.updateTime),_this.chipinbtn.active=!1,_this.waitchipin.active=!1,_this.dxk.active=!0,_this.pokerchoose.active=!0,_this.jsk.active=!0,_this.dealpoker();for(var i=0;i<exceptbanker.length-1;i++){var plindex=playerIds.indexOf(exceptbanker[i]);_this.spawnplayerOdds(plindex,data.plasyer[exceptbanker[i]].odds)}_this.scheduleOnce(function(){for(var _this2=this,i=0;i<5*playerIds.length;i++)this.pokers.children[i].destroy();for(var i=0;i<playerIds.length;i++)if("string"!=typeof usertoken[i]){var ut=usertoken[i].toString();data.pokes[ut].pokes.forEach(function(item,index){if("string"==typeof item){var pf=eval("("+item+")");_this2.spawnpokerface(pf.color,pf.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount)}else _this2.spawnpokerface(item.color,item.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount);pokerfacecount++})}else data.pokes[usertoken[i]].pokes.forEach(function(item,index){if("string"==typeof item){var pf=eval("("+item+")");_this2.spawnpokerface(pf.color,pf.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount)}else _this2.spawnpokerface(item.color,item.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount);pokerfacecount++});cc.audioEngine.play(this.audiosource.getComponent("audio").sendcard,!1,1),allcount=data.timeout,this.schedule(this.updateTime,1,allcount,0);var bullcount=0;this.schedule(function(){switch(data.pokes[usertoken[bullcount]].title){case"没牛":this.spawnbulltype(bullcount,0),cc.audioEngine.play(this.audiosource.getComponent("audio").cow0,!1,1);break;case"牛一":this.spawnbulltype(bullcount,1),cc.audioEngine.play(this.audiosource.getComponent("audio").cow1,!1,1);break;case"牛二":this.spawnbulltype(bullcount,2),cc.audioEngine.play(this.audiosource.getComponent("audio").cow2,!1,1);break;case"牛三":this.spawnbulltype(bullcount,3),cc.audioEngine.play(this.audiosource.getComponent("audio").cow3,!1,1);break;case"牛四":this.spawnbulltype(bullcount,4),cc.audioEngine.play(this.audiosource.getComponent("audio").cow4,!1,1);break;case"牛五":this.spawnbulltype(bullcount,5),cc.audioEngine.play(this.audiosource.getComponent("audio").cow5,!1,1);break;case"牛六":this.spawnbulltype(bullcount,6),cc.audioEngine.play(this.audiosource.getComponent("audio").cow6,!1,1);break;case"牛七":this.spawnbulltype(bullcount,7),cc.audioEngine.play(this.audiosource.getComponent("audio").cow7,!1,1);break;case"牛八":this.spawnbulltype(bullcount,8),cc.audioEngine.play(this.audiosource.getComponent("audio").cow8,!1,1);break;case"牛九":this.spawnbulltype(bullcount,9),cc.audioEngine.play(this.audiosource.getComponent("audio").cow9,!1,1);break;case"牛牛":this.spawnbulltype(bullcount,10),cc.audioEngine.play(this.audiosource.getComponent("audio").cow10,!1,1);break;case"四花牛":this.spawnbulltype(bullcount,11),cc.audioEngine.play(this.audiosource.getComponent("audio").cow11,!1,1);break;case"四炸":this.spawnbulltype(bullcount,12),cc.audioEngine.play(this.audiosource.getComponent("audio").cow13,!1,1);break;case"五小牛":this.spawnbulltype(bullcount,13),cc.audioEngine.play(this.audiosource.getComponent("audio").cow14,!1,1);break;case"五花牛":this.spawnbulltype(bullcount,14),cc.audioEngine.play(this.audiosource.getComponent("audio").cow12,!1,1);break;default:this.spawnbulltype(bullcount,0),cc.audioEngine.play(this.audiosource.getComponent("audio").montageerror,!1,1)}bullcount++},1,playerIds.length-1,data.timeout+1),this.scheduleOnce(function(){for(var e=0;e<exceptbanker.length;e++)for(var t=data.plasyer[exceptbanker[e]].amount.toString(),o=playerIds.indexOf(exceptbanker[e]),n=0;n<t.length;n++){var c=t.charAt(0),i=t.charAt(n);this.spawnwinfailnum(c,i,o,n)}},data.timeout+2),this.scheduleOnce(function(){for(var e=playerIds.indexOf(data.banker.playerId),t=data.banker.amount.toString(),o=0;o<t.length;o++){var n=t.charAt(0),c=t.charAt(o);this.spawnwinfailnum(n,c,e,o)}},data.timeout+2.3),this.scheduleOnce(function(){var e=cc.sequence(cc.show(),cc.scaleTo(.3,.7,.7),cc.delayTime(1.5),cc.hide()),t=[];t.push(data.pokes[data.banker.token].pokeId);for(var o=0;o<exceptbanker.length;o++)t.push(data.pokes[data.plasyer[exceptbanker[o]].token].pokeId);for(o=0;o<t.length;o++)for(var n=0;n<t.length-1-o;n++)if(t[n]<t[n+1]){var c=t[n];t[n]=t[n+1],t[n+1]=c}data.pokes[data.banker.token].pokeId==t[0]?(this.ts.active=!0,this.ts.runAction(e),cc.audioEngine.play(this.audiosource.getComponent("audio").pentakill,!1,1)):data.pokes[data.banker.token].pokeId==t[playerIds.length]&&(this.tp.active=!0,this.tp.runAction(e),cc.audioEngine.play(this.audiosource.getComponent("audio").montageerror,!1,1))},data.timeout+4),this.scheduleOnce(function(){this.jxyx.active=!0},data.timeout+5)},5*playerIds.length*.05+1),_this.schedule(function(){for(var e,t=0,o=0;o<playerIds.length;o++)playerIds[o]==data.banker.playerId&&(t=o);e=playerIds.indexOf(exceptbanker[coinindex]),console.log(coinindex),data.pokes[data.banker.token].pokeId>data.pokes[data.plasyer[exceptbanker[coinindex]].token].pokeId?this.schedule(function(){cattleGlobal.cointoposiX=coinposi[t].x,cattleGlobal.cointoposiY=coinposi[t].y,this.spawncoin(coinposi[e].x+60*cc.randomMinus1To1(),coinposi[e].y+60*cc.randomMinus1To1()),5<2*Math.abs(data.plasyer[playerIds[e]].amount)?cc.audioEngine.play(this.audiosource.getComponent("audio").betAll,!1,1):cc.audioEngine.play(this.audiosource.getComponent("audio").betone,!1,1)},.1,2*Math.abs(data.plasyer[playerIds[e]].amount),0):this.schedule(function(){cattleGlobal.cointoposiX=coinposi[e].x,cattleGlobal.cointoposiY=coinposi[e].y,this.spawncoin(coinposi[t].x+60*cc.randomMinus1To1(),coinposi[t].y+60*cc.randomMinus1To1()),5<2*Math.abs(data.plasyer[playerIds[e]].amount)?cc.audioEngine.play(this.audiosource.getComponent("audio").betAll,!1,1):cc.audioEngine.play(this.audiosource.getComponent("audio").betone,!1,1)},.1,2*Math.abs(data.plasyer[playerIds[e]].amount),0),coinindex++},.1,exceptbanker.length-1,data.timeout+5)}})},commitBankerOdds:function(){var t=this;function e(e){t.snatchvillagebtn.children[e].on(cc.Node.EventType.TOUCH_END,function(){ZR_IO.emit("banker_choose",{playerId:GD.playerId,odds:e}),t.snatchvillagebtn.active=!1,t.ddk.active=!0},t)}e(0),e(1),e(2),e(3)},chipinOdds:function(){var t=this;function e(e){t.chipinbtn.children[e].on(cc.Node.EventType.TOUCH_END,function(){ZR_IO.emit("player_choose",{playerId:GD.playerId,odds:e}),t.chipinbtn.active=!1},t)}e(0),e(1),e(2),e(3)},onLoad:function(){(window.ttt=this).data={},this.defaultscene(),this.onGameEvent(),this.matchingRoom(),this.commitBankerOdds(),this.chipinOdds(),cc.audioEngine.play(this.audiosource.getComponent("audio").windowopen,!1,1),cc.director.preloadScene("cattle",function(){cc.log("Next scene preloaded")}),this.jxyx.on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("cattle")},this)},start:function(){},update:function(e){}}),cc._RF.pop()},{cattleGlobal:"cattleGlobal"}],cattlechooseRoom:[function(e,t,o){"use strict";cc._RF.push(t,"1d429YIFGdEcZLyQgJtBuip","cattlechooseRoom");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};cc.Class({extends:cc.Component,properties:{layoutNode:cc.Node},loadGameRes:function(o){var n=this;cc.loader.loadRes("/hall/QZNN-DT-ZY",cc.SpriteAtlas,function(e,t){e?o&&o.call(n,!1,t,e):o&&o.call(n,!0,t)})},loadGameList:function(l){var s=this;API.get("/api/game/hall/listBygameId",{gameId:CD.gameTypes[2].gameId},function(e,t){var i=void 0,a=[],o=function(e){if("抢庄场"!=e)return"continue";var c=t[e];c.forEach(function(o){var n=function(){var e=cc.instantiate(i);if(e.position=cc.v2(0,0),l){var t=void 0;7==o.hallId?t="DT-FJ-XS":8==o.hallId?t="DT-FJ-CJ":9==o.hallId?t="DT-FJ-ZJ":10==o.hallId&&(t="DT-FJ-GJ"),t&&(e.getComponent(cc.Sprite).spriteFrame=l.getSpriteFrame(t))}s.bindScrollItemEvent(e,function(){s.enterRoom(o)}),a.push({sort:o.hallId,node:e}),a.length==c.length&&function(){a.sort(MyUtil.compareUp(a,"sort")),a.forEach(function(e){s.layoutNode.addChild(e.node)})}.call(s)};i?n():cc.loader.loadRes("prefab/roomname",cc.Prefab,function(e,t){i=t,cc.loader.setAutoRelease(t,!0),n()})})};for(var n in t)o(n)})},enterRoom:function(e){var t=GD.player.experience||0;t<e.less?ccUtil.modalTip("余额不够进入："+t):(GD.current.hallItem=e,cc.director.loadScene(CD.gameTypes[2].gameSceneName))},bindScrollItemEvent:function(e,t){var o=this,n=void 0,c=void 0;e.on(cc.Node.EventType.TOUCH_START,function(e){n=e.touch._point.x,c=e.touch._point.y,o.isTouchMove=!1}),e.on(cc.Node.EventType.TOUCH_CANCEL,function(e){o.isTouchMove=!1}),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){5<Math.max(Math.abs(e.touch._point.x-n),Math.abs(e.touch._point.y-c))&&(o.isTouchMove=!0)}),e.on(cc.Node.EventType.TOUCH_END,function(e){0==o.isTouchMove&&t&&t.call(o)})},back:function(){},getToken:function(){return GD.token=MyUtil.getQueryString("token"),GD.token},initSocketIo:function(){window.ZR_IO&&ZR_IO.destroy();window.initSocketIo({},function(e,t,o){console.log("连接结果 - ",e,o,t),0==e&&cc.director.loadScene(CD.gameTypes[1].roomListScene)})},onLoad:function(){var o=this;ccUtil.modalLoading("数据加载中..."),delete GD.current.hallItem,this.getToken(),this.initSocketIo(),ZR_IO.emit("player_info",{},function(e){console.log("playerInfo",e),e.playerInfo&&"object"==n(e.playerInfo)?(GD.player=e.playerInfo,GD.playerId=e.playerInfo.playerId,o.loadGameRes(function(e,t){e?(o.loadGameList(t),ccUtil.closeModal()):ccUtil.modalLoading("资源载入失败")})):ccUtil.modalLoading("无效Token")})},start:function(){}}),cc._RF.pop()},{}],coinmove:[function(e,t,o){"use strict";cc._RF.push(t,"db8b44v4KpIfYAuITaYzU3a","coinmove");var n=e("cattleGlobal");cc.Class({extends:cc.Component,properties:{},onLoad:function(){if(null!=n.cointoposiX){var e=cc.sequence(cc.moveTo(.5,cc.p(n.cointoposiX,n.cointoposiY)),cc.hide);this.node.runAction(e)}},start:function(){}}),cc._RF.pop()},{cattleGlobal:"cattleGlobal"}],config:[function(e,t,o){"use strict";cc._RF.push(t,"517208fb8pEIqlPCTMr0neV","config"),window.configData={isDebug:!0,apiServerUrl:"http://api.qisq.top",socketServer:{url:"http://socket.qisq.top"}},t.exports=null,cc._RF.pop()},{}],pokerMove:[function(e,t,o){"use strict";cc._RF.push(t,"47111dPaKdF1pXV3NMxdyWY","pokerMove");var n=e("cattleGlobal");cc.Class({extends:cc.Component,properties:{},onLoad:function(){if(null!=n.pokerPosiX)if(1==n.needscale){var e=cc.spawn(cc.moveTo(.5,cc.p(n.pokerPosiX,n.pokerPosiY)),cc.scaleTo(.5,1.2,1.2));this.node.runAction(e)}else{e=cc.moveTo(.5,cc.p(n.pokerPosiX,n.pokerPosiY));this.node.runAction(e)}},start:function(){}}),cc._RF.pop()},{cattleGlobal:"cattleGlobal"}]},{},["build_main","config","Audio","Base64","EventStop","audio","cattleGlobal","cattleInit","cattlechooseRoom","coinmove","pokerMove"]);