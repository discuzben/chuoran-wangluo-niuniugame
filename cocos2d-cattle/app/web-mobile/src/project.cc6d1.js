require=function c(a,l,s){function r(t,e){if(!l[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=l[t]={exports:{}};a[t][0].call(i.exports,function(e){return r(a[t][1][e]||e)},i,i.exports,c,a,l,s)}return l[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)r(s[e]);return r}({Audio:[function(e,t,o){"use strict";cc._RF.push(t,"8000cop7k9JspAJcqAS3lju","Audio"),cc.Class({extends:cc.Component,properties:{bgVolume:1,deskVolume:1,bgAudioID:-1},init:function(){var e;null!=(e=cc.sys.localStorage.getItem("bgVolume"))&&(this.bgVolume=parseFloat(e)),null!=(e=cc.sys.localStorage.getItem("deskVolume"))&&(this.deskVolume=parseFloat(e)),cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.audioEngine.resumeAll()})},getUrl:function(e){return cc.url.raw("resources/audio/"+e)},playBGM:function(e,t){var o=this.getUrl(e);0<=this.bgAudioID&&cc.audioEngine.stop(this.bgAudioID),null!=t&&this.setBGMVolume(t),this.bgAudioID=cc.audioEngine.play(o,!0,this.bgmVolume)},playSFX:function(e){var t=this.getUrl(e);if(0<this.deskVolume)cc.audioEngine.play(t,!1,this.deskVolume)},stopBGM:function(){0<=this.bgAudioID&&(cc.audioEngine.stop(this.bgAudioID),this.bgAudioID=null)},setSFXVolume:function(e){this.deskVolume!=e&&(cc.sys.localStorage.setItem("deskVolume",e),this.deskVolume=e)},getState:function(){return cc.audioEngine.getState(this.bgAudioID)},setBGMVolume:function(e,t){0<=this.bgAudioID&&(0<e&&cc.audioEngine.getState(this.bgAudioID)===cc.audioEngine.AudioState.PAUSED?cc.audioEngine.resume(this.bgAudioID):0==e&&cc.audioEngine.pause(this.bgAudioID)),(this.bgVolume!=e||t)&&(cc.sys.localStorage.setItem("bgVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgAudioID,e))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{}],Base64:[function(e,t,o){"use strict";cc._RF.push(t,"dfe07zhv1VA/aHhoA8yA/qC","Base64"),cc.Class({extends:cc.Component,properties:{},statics:{decode:function(e){var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],o=e.length,n=0;"="==e.charAt(o-1)&&("="==e.charAt(o-2)?(n=4,e=e.substring(0,o-2)):(n=2,e=e.substring(0,o-1)));for(var i=[],c=0,a=e.length;c<a;++c)for(var l=e.charAt(c),s=0,r=t.length;s<r;++s)if(l==t[s]){var u=this._toBinary(s),d=u.length;if(0<6-d)for(var p=6-d;0<p;--p)u.unshift(0);i=i.concat(u);break}0<n&&(i=i.slice(0,i.length-n));var h=[],f=[];for(c=0,a=i.length;c<a;)if(0==i[c])h=h.concat(this._toDecimal(i.slice(c,c+8))),c+=8;else{for(var m=0;c<a&&1==i[c];)++m,++c;for(f=f.concat(i.slice(c+1,c+8-m)),c+=8-m;1<m;)f=f.concat(i.slice(c+2,c+8)),c+=8,--m;h=h.concat(this._toDecimal(f)),f=[]}return h},_toBinary:function(e){for(var t=new Array;0<e;){var o=e%2;e=Math.floor(e/2),t.push(o)}return t.reverse(),t},_toDecimal:function(e){for(var t=0,o=0,n=e.length-1;0<=n;--n){1==e[n]&&(t+=Math.pow(2,o)),++o}return t}},onLoad:function(){}}),cc._RF.pop()},{}],EventAudio:[function(e,t,o){"use strict";cc._RF.push(t,"1e4be0Hj/FHG40VipGgc1z7","EventAudio"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){window.AudioCtrl.resumeAudio()}),this.node.on(cc.Node.EventType.MOUSE_ENTER,function(e){window.AudioCtrl.resumeAudio()}),this.node.on(cc.Node.EventType.MOUSE_DOWN,function(e){window.AudioCtrl.resumeAudio()})}}),cc._RF.pop()},{}],EventStop:[function(e,t,o){"use strict";cc._RF.push(t,"05faf+0gV5LgaLLx2mFvDj7","EventStop"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()}),this.node.on(cc.Node.EventType.MOUSE_ENTER,function(e){e.stopPropagation()}),this.node.on(cc.Node.EventType.MOUSE_DOWN,function(e){e.stopPropagation()})}}),cc._RF.pop()},{}],audio:[function(e,t,o){"use strict";cc._RF.push(t,"10abevgjtxCUqsWHe1DKYxX","audio"),cc.Class({extends:cc.Component,properties:{cow0:{url:cc.AudioClip,default:null},cow1:{url:cc.AudioClip,default:null},cow2:{url:cc.AudioClip,default:null},cow3:{url:cc.AudioClip,default:null},cow4:{url:cc.AudioClip,default:null},cow5:{url:cc.AudioClip,default:null},cow6:{url:cc.AudioClip,default:null},cow7:{url:cc.AudioClip,default:null},cow8:{url:cc.AudioClip,default:null},cow9:{url:cc.AudioClip,default:null},cow10:{url:cc.AudioClip,default:null},cow11:{url:cc.AudioClip,default:null},cow12:{url:cc.AudioClip,default:null},cow13:{url:cc.AudioClip,default:null},cow14:{url:cc.AudioClip,default:null},dcollectgold:{url:cc.AudioClip,default:null},lampEnd:{url:cc.AudioClip,default:null},lampRun:{url:cc.AudioClip,default:null},betAll:{url:cc.AudioClip,default:null},betone:{url:cc.AudioClip,default:null},carddone1:{url:cc.AudioClip,default:null},carddone:{url:cc.AudioClip,default:null},collectgold:{url:cc.AudioClip,default:null},dealcard:{url:cc.AudioClip,default:null},gamestart:{url:cc.AudioClip,default:null},montageerror:{url:cc.AudioClip,default:null},pentakill:{url:cc.AudioClip,default:null},scrollnumber:{url:cc.AudioClip,default:null},sendcard:{url:cc.AudioClip,default:null},wingold:{url:cc.AudioClip,default:null},windowopen:{url:cc.AudioClip,default:null}},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],build_main:[function(e,t,o){"use strict";cc._RF.push(t,"627951+gx5EUYwR5fmwkGj8","build_main");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)};window.__localStoreUtil__INSTANCE__=null;var i=function(){return null==window.__localStoreUtil__INSTANCE__&&(this.storeKey="CR_",this.init(),window.__localStoreUtil__INSTANCE__=this),window.__localStoreUtil__INSTANCE__};i.prototype={init:function(){this.localStorage=cc.sys.localStorage},set:function(e,t){if(t&&"object"==(void 0===t?"undefined":a(t)))try{t=JSON.stringify(t)}catch(e){return!1}return this.localStorage.setItem(this.storeKey+e,t),!0},get:function(e){var t=this.localStorage.getItem(this.storeKey+e);if("null"==t||"undefined"==t)t=null;else if(new RegExp("^[{|[]").test(t))try{t=JSON.parse(t)}catch(e){t=void 0}return t}},window.STORE=new i,e("config"),window.GD=window.GlobalData={token:null,playerId:null,player:null,loginParams:null,exchangeRoomKey:null,current:{},setting:{musicVolume:1,effectVolume:1,isMusicMute:!1,isEffectMute:!1}},function(){var e=STORE.get("musicVolume");null!=e&&(GD.setting.musicVolume=1*e);var t=STORE.get("effectVolume");null!=t&&(GD.setting.effectVolume=1*t);var o="true"===STORE.get("isMusicMute");null!=o&&(GD.setting.isMusicMute=o);var n="true"===STORE.get("isEffectMute");null!=n&&(GD.setting.isEffectMute=n)}(),window.CD=window.ConstantData={gameTypes:{1:{name:"炸金花",gameId:30,gameSceneName:"glodenFlower",roomListScene:"roomList"},2:{name:"牛牛",gameId:50,gameSceneName:"cattle",roomListScene:"cattleChooseRoom"},3:{name:"德州扑克",gameId:70,gameSceneName:"holdem",roomListScene:"roomList"},4:{name:"斗地主",gameId:170,gameSceneName:"landload",roomListScene:"landloadRoomList"}}};var r={getLength:function(e){if(null==e||""==e)return 0;for(var t=0,o=e.length,n=-1,i=0;i<o;i++)t+=0<=(n=e.charCodeAt(i))&&n<=128?1:2;return t},substr:function(e,t,o){var n=e||"";if(r.getLength(e)>t){for(var i,c=0,a=e.length,l=-1,s=0;s<a;s++){if(t<=c){i=s;break}c+=0<=(l=e.charCodeAt(s))&&l<=128?1:2}n=e.substr(0,i),!0===o&&(n+="...")}return n},compareUp:function(e,i){return"number"!=typeof e[0][i]?function(e,t){var o=e[i],n=t[i];return o.localeCompare(n)}:function(e,t){return e[i]-t[i]}},compareDown:function(e,n){return"number"!=typeof e[0][n]?function(e,t){var o=e[n];return t[n].localeCompare(o)}:function(e,t){var o=e[n];return t[n]-o}},uuid:function(e,t){var o,n,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),c=[];if(t=t||i.length,e)for(o=0;o<e;o++)c[o]=i[0|Math.random()*t];else for(c[8]=c[13]=c[18]=c[23]="-",c[14]="4",o=0;o<36;o++)c[o]||(n=0|16*Math.random(),c[o]=i[19==o?3&n|8:n]);return c.join("")},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=new RegExp("(^|/)"+e+"/([^/]*)(/|$)","i"),n=window.location.search.substr(1).match(t),i=window.location.pathname.substr(1).match(o);return null!=n?unescape(n[2]):null!=i?unescape(i[2]):null}};window.MyUtil=r,window.__ccModal=null;var c=function(){if(window.__ccModal)return window.__ccModal;window.__ccModal=this};c.prototype._addButtons=function(e){var t=this.modalNode.getChildByName("btns"),i={};if(e&&t&&(t.children.forEach(function(e,t){i[e.name]=e}),e.buttons)){e.buttons.forEach(function(e,t){if(e.name&&null!=i[e.name]){var o=i[e.name];delete i[e.name],o.active=!0,u.setLabelString(o,"text",e.text||"");var n=o.getComponent(cc.Button);e.handler?n.clickEvents=[e.handler]:n.clickEvents=[]}})}for(var o in i)i[o].active=!1},c.prototype._modal=function(o,n,i,c){var a=this,l=this;(null==this.modalNode||this.modalNode&&0==this.modalNode.isValid)&&(this.modalNode=cc.find("modal")),this.modalNode&&0==this.modalNode.isValid&&(this.modalNode=null),this.modalloadCb=function(){var e=a.modalNode;u.setLabelString(e,"size/bg/container/text",o||""),e.active=!0,a._addButtons(c);var t=e.children[0]._components[0];t.unscheduleAllCallbacks(),null!=i&&0<i?t.schedule(function(){--i<=0&&(t.unscheduleAllCallbacks(),e.active=!1,n&&n())},1):n&&n()},null!=this.modalNode?l.modalloadCb():1!=l.isModalloading&&(l.isModalloading=!0,cc.loader.loadRes("public/modal",function(e,t){if(e)cc.error("loadRes - modal 失败",e.message||e);else if(t instanceof cc.Prefab){var o=cc.instantiate(t);o.parent=cc.director.getScene(),l.modalNode=o,l.isModalloading=!1,l.modalloadCb()}}))},c.prototype.close=function(e){this.modalNode&&(this.modalNode.active=!1)},c.prototype.loading=function(e,t){window.AudioCtrl.playWindowopen(),this._modal.apply(this,[e,null,null,t])},c.prototype.tip=function(e,t,o,n){window.AudioCtrl.playWindowopen(),this._modal.apply(this,[e,t,o||2,n])};var l,s,u={setSpriteFrame:function(e,t,o){var n=e.getComponent(cc.Sprite);null==n&&(n=e.addComponent(cc.Sprite)),n.spriteFrame=t.getSpriteFrame(o)},setLabelString:function(t,e,o){if(e)e.split("/").forEach(function(e){null!=t&&(t=t.getChildByName(e))});t&&(t.getComponent(cc.Label).string=null==o?"":o)},labelTimeout:function(t,e,o,n){if(e)e.split("/").forEach(function(e){t=t.getChildByName(e)});var i=t.getComponent(cc.Label);i||((i=t.addComponent(cc.Label)).string=""),i.unscheduleAllCallbacks();i.scheduleOnce(function(){i.unscheduleAllCallbacks(),n&&n()},o||1)},labelInterval:function(t,e,o,n){if(e)e.split("/").forEach(function(e){t=t.getChildByName(e)});var i=t.getComponent(cc.Label);i||((i=t.addComponent(cc.Label)).string=""),i.unscheduleAllCallbacks(),n&&n(o);i.schedule(function(){--o<=0&&i.unscheduleAllCallbacks(),n&&n(o)},1)},modalLoading:function(e,t){(new c).loading(e,t)},modalTip:function(e,t,o,n){(new c).tip(e,t,o,n)},closeModal:function(){(new c).close()}};window.ccUtil=u,l=void 0,(s=function(){l=this}).prototype.playSelect=function(e){this.playResAudio("public/audio/select.mp3")},s.prototype.playWindowopen=function(e){this.playResAudio("public/audio/window_open.mp3")},s.prototype.playBGM=function(e){var t=cc.url.raw("resources/"+e);this.playNodeAudioBGM(t)},s.prototype.playResAudio=function(e){if(!0!==GD.setting.isEffectMute){var t=cc.url.raw("resources/"+e);cc.audioEngine.play(t,!1,GD.setting.effectVolume)}},s.prototype.playNodeAudio=function(e){!0!==GD.setting.isEffectMute&&cc.audioEngine.play(e,!1,GD.setting.effectVolume)},s.prototype.playNodeAudioBGM=function(e){(l._bgmSource=e)&&(l._musicAudioId=cc.audioEngine.play(e,!0,GD.setting.musicVolume),1==GD.setting.isMusicMute&&cc.audioEngine.pause(l._musicAudioId))},s.prototype.stopBGM=function(){0<=l._musicAudioId&&(cc.audioEngine.stop(l._musicAudioId),l._musicAudioId=null)},s.prototype.setMusicVolume=function(e){e<0?e=0:1<e&&(e=1),GD.setting.musicVolume=e,0<=this._musicAudioId&&cc.audioEngine.setVolume(this._musicAudioId,GD.setting.musicVolume),STORE.set("musicVolume",e)},s.prototype.setEffectVolume=function(e){e<0?e=0:1<e&&(e=1),GD.setting.effectVolume=e,STORE.set("effectVolume",e)},s.prototype.muteMusic=function(e){GD.setting.isMusicMute=!!e,0<=this._musicAudioId?!0!==GD.setting.isMusicMute?(cc.audioEngine.resume(this._musicAudioId),cc.audioEngine.setVolume(this._musicAudioId,GD.setting.musicVolume)):cc.audioEngine.pause(this._musicAudioId):this.playNodeAudioBGM(l._bgmSource),STORE.set("isMusicMute",GD.setting.isMusicMute)},s.prototype.muteEffect=function(e){GD.setting.isEffectMute=!!e,STORE.set("isEffectMute",GD.setting.isEffectMute)},s.prototype.resumeAudio=function(e){var t=cc.sys.__audioSupport.context;"suspended"===t.state&&t.resume()},window.AudioCtrl=new s,window.__apiRequestPlugin__INSTANCE=null;var d=function(){return null==window.__apiRequestPlugin__INSTANCE&&(window.__apiRequestPlugin__INSTANCE=this),window.__apiRequestPlugin__INSTANCE};d.prototype={_postDataFormat:function(e,t){if(e&&"object"==(void 0===e?"undefined":a(e))){if("functionXXXX"==typeof FormData){var o=new FormData;for(var n in e)o.append(n,e[n]);return o}var i=new Array,c=0;for(var n in e)i[c]=encodeURIComponent(n)+"="+encodeURIComponent(e[n]),c++;return i.join("&")}},_requestData:function(e,t,o,n,i){o?o.token=GD.token:o={token:GD.token};var c=this._postDataFormat(o);"GET"==e.toUpperCase()&&(t+=(-1!=t.indexOf("?")?"&":"?")+c);var a=cc.loader.getXMLHttpRequest();"function"==typeof n&&(i=n,n=null),null==n&&(n=!0),this._streamXHREventsToLabel(a,i),a.open(e,t,n),cc.sys.isNative&&a.setRequestHeader("Accept-Encoding","gzip,deflate"),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.timeout=5e3,"GET"==e.toUpperCase()?a.send():a.send(c)},_streamXHREventsToLabel:function(t,e){var o=e||function(e,t,o){cc.log("请求结果：",t)};["loadstart","abort","error","load","loadend","timeout"].forEach(function(e){t["on"+e]=function(){}}),t.onreadystatechange=function(){if(4===t.readyState)if(200<=t.status&&t.status<300){var e=void 0;try{e=JSON.parse(t.responseText)}catch(e){}200==e.status?o(!0,e.result):o(!1,e.result)}else o(!1,"statusCode="+t.status)}},_dealPath:function(e){return-1==e.indexOf("http://")&&-1==e.indexOf("https://")&&(e=window.configData.apiServerUrl+e),e},get:function(e,t,o,n){var i=this._dealPath(e);this._requestData("GET",i,t,o,n)},put:function(e,t,o,n){var i=this._dealPath(e);this._requestData("PUT",i,t,o,n)},post:function(e,t,o,n){var i=this._dealPath(e);this._requestData("POST",i,t,o,n)},test_get:function(){this.get("/api/hello/getHello",null,function(e,t){1==e?cc.log("请求成功：",t):cc.log("请求失败：",t)})},test_post:function(){this.get("/api/hello/getHello2")}},window.apiRequestPlugin=d,window.API=new d,null==cc.Button.prototype.touchEndedClone&&(cc.Button.prototype.touchEndedClone=cc.Button.prototype._onTouchEnded,cc.Button.prototype._soundOn=!0,cc.Button.prototype.setSoundEffect=function(e){this._soundOn=e},cc.Button.prototype._onTouchEnded=function(e,t){!0!==t&&(this.interactable&&this.enabledInHierarchy&&this._pressed&&1==this._soundOn&&window.AudioCtrl.playSelect(),this.touchEndedClone(e,!0))}),window._SocketIO_INSTANCE=window.ZR_IO=null,window.currentSocketRoomParams=null;var p=function(e,t){return null==window._SocketIO_INSTANCE&&(this.initSocketIo({url:window.configData.socketServer.url}),window._SocketIO_INSTANCE=this,window.currentSocketRoomParams=null),window.currentSocketRoomParams=e,window._SocketIO_INSTANCE.onReconnectCb(t),window.ZR_IO=window._SocketIO_INSTANCE,window._SocketIO_INSTANCE};p.prototype={initSocketIo:function(e){var t=arguments,o=this,n=!0,i=io.connect(e.url),c={};i.eventCb=function(e,t){t?c["event_"+e]=t:delete c["event_"+e]},i.myEmit=function(e,t){if(t&&t.constructor==Object){var o={emitName:e,data:t};i.emit("socket.io",o)}else alert("ERROR-传递的数据类型必须为Object")},i.on("socket.io-data",function(e){if(cc.log("socket.io-data",e),e.eventName&&c["event_"+e.eventName]){var t=e.data;c["event_"+e.eventName].call(null,t,t.__success)}}),i.on("connect",function(){cc.log("connect",o.reConnectFrom,n,a(o.reconnectCb)),"local"==o.reConnectFrom?o.reConnectFrom:0==n&&(n=!0,o.reconnectCb&&o.reconnectCb(!0))}),i.on("reconnect_attempt",function(){cc.log("reconnect_attempt",o.reConnectFrom,n),"local"==o.reConnectFrom||1==n&&(n=!1,u.modalLoading("socket服务连接断开"))}),i.on("reconnect",function(){cc.log("reconnect")}),i.on("reconnecting",function(){cc.log("reconnecting",t)}),i.on("reconnect_error",function(){cc.log("reconnect_error")}),i.on("reconnect_failed",function(){cc.log("reconnect_failed")}),i.on("ping",function(){cc.log("ping",new Date)}),i.on("pong",function(){cc.log("pong",new Date)}),this.socketIo=i},onReconnectCb:function(e){this.reconnectCb=e},joinRoom:function(e,t){var o=t||function(e){cc.log("join_room_done",e)};this.__emit("join_room",e,o,!0)},__emit:function(e,t,o,n){if(cc.info("socket-emit",e),"join_room"!=e||n){if(e){if(null==t&&(t={}),"function"==typeof t&&(o=t,t={}),t.playerId=GD.playerId,t.__hallItem=GD.current.hallItem,t.__gameRoomKey=GD.gameRoomKey,t.__token=GD.token,t.__exchangeRoomKey=GD.exchangeRoomKey,o){var i=e+"_"+Math.floor(1e4*Math.random());t.cbEventName=i,this.socketIo.eventCb(i,o)}this.socketIo.myEmit(e,t)}}else cc.error("join_room事件已作为为系统加入房间,请更换名称！！")},emit:function(e,t,o){this.__emit.apply(this,arguments)},on:function(e,t){cc.info("socket-on",e),e&&this.socketIo.eventCb(e,t)},reConnect:function(){this.reConnectFrom="local",this.socketIo.disconnect(),this.socketIo.connect()},destroy:function(){window._SocketIO_INSTANCE=window.ZR_IO=null,this.socketIo.destroy()},test_on:function(){this.on("emit-test",function(e){cc.log(e)})}},window.socketIoPlugin=p,window.initSocketIo=function(e,t){new p(e,t)},cc._RF.pop()},{config:"config"}],cattleGlobal:[function(e,t,o){"use strict";cc._RF.push(t,"f78ccWumA9G87fri4p4q9Ai","cattleGlobal"),t.exports={pokerPosiX:null,pokerPosiY:null,needscale:null,cointoposiX:null,cointoposiY:null,gtoposiX:null,gtoposiY:null},cc._RF.pop()},{}],cattleInit:[function(require,module,exports){"use strict";cc._RF.push(module,"64f853EBD5M8K64qb/Ahu92","cattleInit");var cattleGlobal=require("cattleGlobal");function getRandom(e,t){var o=t-e;return e+Math.round(Math.random()*o)}var odds=null,pokernumposi=[{x:-42,y:62}],userchooseposi=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],pokerposi=[{x:515,y:-379},{x:689,y:-379},{x:863,y:-379},{x:1037,y:-379},{x:1211,y:-379},{x:0,y:215},{x:60,y:215},{x:120,y:215},{x:180,y:215},{x:240,y:215},{x:796,y:473},{x:854,y:473},{x:912,y:473},{x:970,y:473},{x:1028,y:473},{x:1490,y:215},{x:1549,y:215},{x:1607,y:215},{x:1665,y:215},{x:1722,y:215}],sortpokerposi=[{x:664,y:-379},{x:744,y:-379},{x:824,y:-379},{x:982,y:-379},{x:1062,y:-379},{x:0,y:215},{x:80,y:215},{x:160,y:215},{x:292,y:215},{x:372,y:215},{x:796,y:473},{x:876,y:473},{x:956,y:473},{x:1082,y:473},{x:1162,y:473},{x:1350,y:215},{x:1430,y:215},{x:1510,y:215},{x:1642,y:215},{x:1722,y:215}],mnsortpoker=[{x:703,y:-379},{x:783,y:-379},{x:863,y:-379},{x:943,y:-379},{x:1023,y:-379},{x:0,y:215},{x:80,y:215},{x:160,y:215},{x:240,y:215},{x:320,y:215},{x:796,y:473},{x:876,y:473},{x:956,y:473},{x:1036,y:473},{x:1116,y:473},{x:1402,y:215},{x:1482,y:215},{x:1562,y:215},{x:1642,y:215},{x:1722,y:215}],coinposi=[{x:-783,y:-361},{x:-771,y:184},{x:-175,y:373},{x:773,y:181}],clockposi=[{x:0,y:0},{x:-426,y:56},{x:-230,y:268},{x:411,y:56}],playerIds=[],exceptbanker=[],usertoken=[],pokerfacecount=0,updatedata=null,updatePokerFacecount=0,pokerfaceclickcount=0,_clickpokertype=[],allcount=0,istrue=!1,coinindex=0,alreadychoosepl=[],currentnum=null,poker=[],clock=0,playersInfos=[],ispc_deal=!1,bankerisclick=!1,curplexperience=0;cc.Class({extends:cc.Component,properties:{userinfo:{default:[],type:cc.Node},roomKey:{default:null,type:cc.Node},chipinbtn:{default:null,type:cc.Node},snatchvillagebtn:{default:null,type:cc.Node},yxks:{default:null,type:cc.Node},ddk:{default:null,type:cc.Node},jsq01:{default:null,type:cc.Node},dxk:{default:null,type:cc.Node},countDown:{default:[],type:cc.Prefab},bankerOdds:{default:[],type:cc.Prefab},playerOdds:{default:[],type:cc.Prefab},pokerback:{default:null,type:cc.Prefab},pokers:{default:null,type:cc.Node},pokerchoose:{default:null,type:cc.Node},jxyx:{default:null,type:cc.Node},wc:{default:null,type:cc.Node},jsk:{default:null,type:cc.Node},bull:{default:null,type:cc.Node},pokerface:{default:[],type:cc.Prefab},pokernumhei:{default:[],type:cc.Prefab},pokernumhon:{default:[],type:cc.Prefab},bulltype:{default:[],type:cc.Prefab},winnum:{default:[],type:cc.Prefab},failnum:{default:[],type:cc.Prefab},ts:{default:null,type:cc.Node},tp:{default:null,type:cc.Node},audiosource:{default:null,type:cc.Node},coin:{default:null,type:cc.Prefab},coinani:{default:null,type:cc.Node},waitchipin:{default:null,type:cc.Node},mask:{default:[],type:cc.Node},g:{default:null,type:cc.Prefab},gani:{default:null,type:cc.Node},ymnpokerbacks:{default:null,type:cc.Prefab}},playAudio:function(e,t){null==t||(e+=!0===t?"_man":"_wom"),window.AudioCtrl.playNodeAudio(this.audiosource.getComponent("audio_source")[e])},defaultscene:function(){this.snatchvillagebtn.active=!1,this.chipinbtn.active=!1,this.yxks.active=!1,this.dxk.active=!1,this.ddk.active=!1,this.jsq01.active=!1,this.jxyx.active=!1,this.jxyx.children[0].active=!1,this.jsk.active=!1,this.ts.active=!1,this.tp.active=!1,this.waitchipin.active=!1,this.jsk.getChildByName("ynbk").active=!1,this.jsk.getChildByName("mnbk").active=!1;for(var e=0;e<this.wc.children.length;e++)this.wc.children[e].active=!1;for(e=0;e<this.userinfo.length;e++)this.userinfo[e].getChildByName("ZJTX-01").active=!1;playerIds=[],exceptbanker=[],usertoken=[],_clickpokertype=[],alreadychoosepl=[],currentnum=updatedata=null,poker=[],bankerisclick=ispc_deal=!(playersInfos=[]),curplexperience=clock=coinindex=allcount=pokerfaceclickcount=updatePokerFacecount=pokerfacecount=0},spawncountdown:function(e){this.jsq01.getChildByName("number").getComponent(cc.Label).string=e},spawnbankerOdds:function(e,t){null!=this.userinfo[e].getChildByName("chipinodd").children[0]&&this.userinfo[e].getChildByName("chipinodd").children[0].destroy();var o=void 0;1==t||0==t?o=0:2==t?o=1:3==t?o=2:4==t&&(o=3);var n=cc.instantiate(this.bankerOdds[o]);this.userinfo[e].getChildByName("chipinodd").addChild(n),3!=e||1!=o&&0!=o||(this.userinfo[e].getChildByName("chipinodd").x=-185)},spawnplayerOdds:function(e,t){if(null!=this.userinfo[e].getChildByName("chipinodd").children[0]&&this.userinfo[e].getChildByName("chipinodd").children[0].destroy(),3==e&&10<=t)(o=cc.instantiate(this.playerOdds[t-1])).setPosition(userchooseposi[e].x,userchooseposi[e].y),this.userinfo[e].getChildByName("chipinodd").addChild(o),this.userinfo[e].getChildByName("chipinodd").x=-230;else if(3==e&&t<10){(o=cc.instantiate(this.playerOdds[t-1])).setPosition(userchooseposi[e].x,userchooseposi[e].y),this.userinfo[e].getChildByName("chipinodd").addChild(o),this.userinfo[e].getChildByName("chipinodd").x=-217}else{var o;(o=cc.instantiate(this.playerOdds[t-1])).setPosition(userchooseposi[e].x,userchooseposi[e].y),this.userinfo[e].getChildByName("chipinodd").addChild(o)}},spawnpokerback:function(){var e=cc.instantiate(this.pokerback);e.setPosition(1451,655),this.pokers.addChild(e)},ymnpokerback:function(e,t){var o=cc.instantiate(this.ymnpokerbacks);o.setPosition(e,t),o.setScale(1.2,1.2),this.pokers.addChild(o)},spawnpokerface:function(e,t,o,n,i,c){var a=null,l=null;"spade"==e?(a=1,l=this.pokernumhei):"club"==e?(a=3,l=this.pokernumhei):"heart"==e?(a=2,l=this.pokernumhon):"diamond"==e?(a=0,l=this.pokernumhon):(a=1,l=this.pokernumhei,console.log("扑克牌面数据错误"));var s=cc.instantiate(this.pokerface[a]);0<=i&&i<=4?(s.scaleX=1.2,s.scaleY=1.2):(s.scaleX=1,s.scaleY=1);var r=cc.instantiate(l[t-1]);r.setPosition(pokernumposi[0].x,pokernumposi[0].y),s.addChild(r),s.setPosition(o,n),s.index=i,this.pokers.addChild(s)},clickpokertype:function(e){"J"==e?_clickpokertype.push(10):"Q"==e?_clickpokertype.push(10):"K"==e?_clickpokertype.push(10):_clickpokertype.push(e)},spawnbulltype:function(e,t){var o=cc.instantiate(this.bulltype[t]);this.bull.children[e].addChild(o)},spawnwinfailnum:function(e,t,o,n){var i=null;switch(t){case"+":case"-":i=10;break;case".":i=11;break;case"0":i=0;break;case"1":i=1;break;case"2":i=2;break;case"3":i=3;break;case"4":i=4;break;case"5":i=5;break;case"6":i=6;break;case"7":i=7;break;case"8":i=8;break;case"9":i=9;break;default:i=0}if("+"==e){var c=cc.instantiate(this.winnum[i]);this.userinfo[o].getChildByName("amount").children[n].addChild(c)}else{c=cc.instantiate(this.failnum[i]);this.userinfo[o].getChildByName("amount").children[n].addChild(c)}},spawng:function(){var e=cc.instantiate(this.g);this.gani.addChild(e)},dealpoker:function(){var e=0;this.schedule(function(){cattleGlobal.pokerPosiX=pokerposi[e].x,cattleGlobal.pokerPosiY=pokerposi[e].y,cattleGlobal.needscale=0<=e&&e<=4?1:null,this.spawnpokerback(),cc.audioEngine.play(this.audiosource.getComponent("audio").dealcard,!1,1),e++},.05,5*playerIds.length-1,0)},spawncoin:function(e,t){var o=cc.instantiate(this.coin);o.setPosition(e,t),this.coinani.addChild(o)},updateTime:function updateTime(){allcount--,this.jsq01.active=!0;var currentclock=void 0;currentclock="string"==typeof playersInfos[clock]?eval("("+playersInfos[clock]+")"):playersInfos[clock];var clockindex=playerIds.indexOf(currentclock);this.snatchvillagebtn.active=0==clockindex&&0==ispc_deal&&0==bankerisclick,1==ispc_deal&&(clockindex=0),this.jsq01.position=cc.v2(clockposi[clockindex].x,clockposi[clockindex].y),cc.audioEngine.play(this.audiosource.getComponent("audio").lampRun,!1,1),this.spawncountdown(allcount),allcount<=1&&this.schedule(function(){this.unschedule(this.updateTime),this.jsq01.active=!1,this.jsk.active=!1,cc.audioEngine.play(this.audiosource.getComponent("audio").lampEnd,!1,1)},.1,1,0)},updatePokerFace:function updatePokerFace(pId,data){var _this=this;updatePokerFacecount=0,alreadychoosepl.push(pId);var drawindex=playerIds.indexOf(pId),updatePokerFacecount=5*drawindex;if("string"!=typeof usertoken[drawindex]){var ut=usertoken[drawindex].toString();data.pokes[ut].pokes.forEach(function(item,index){if("string"==typeof item){var pf=eval("("+item+")");_this.spawnpokerface(pf.color,pf.num,pokerposi[updatePokerFacecount].x,pokerposi[updatePokerFacecount].y,7)}else _this.spawnpokerface(item.color,item.num,pokerposi[updatePokerFacecount].x,pokerposi[updatePokerFacecount].y,7);updatePokerFacecount++})}else data.pokes[usertoken[drawindex]].pokes.forEach(function(item,index){if("string"==typeof item){var pf=eval("("+item+")");_this.spawnpokerface(pf.color,pf.num,pokerposi[updatePokerFacecount].x,pokerposi[updatePokerFacecount].y,7)}else _this.spawnpokerface(item.color,item.num,pokerposi[updatePokerFacecount].x,pokerposi[updatePokerFacecount].y,7);updatePokerFacecount++});this.wc.children[drawindex].active=!0},updateLocalCoins:function(e,t){GD.player.experience=t},gameOverDeal:function(e){var n=this;n.jxyx.active=!0,e.players.forEach(function(e){var t=n._seatNumMatch(e.seatNum),o=n.childNodes["user"+t].getChildByName("moneyNode");n.genMoneyNumberNode(o,e.win,e.isWinner),n._updateLocalCoins(t,e.ownCoins)}),n.data.gameStatus=2},myHandler:function(e){var t=new cc.Component.EventHandler;return t.target=cc.find("Canvas/script"),t.component="cattleInit",t.handler="handlerFunc",t.customEventData=e,t},back:function(){0==GD.gameStatus||1!=this.data.playStatus?(GD.gameRoomKey=null,cc.director.loadScene(CD.gameTypes[2].roomListScene)):ccUtil.modalTip("您当前正在游戏",null,1)},handlerFunc:function(e,t){"back_hall"==t?this.back():"go_on_match"==t&&cc.director.loadScene(cc.director.getScene().getName())},bankertime:function(e){allcount=e,this.schedule(this.updateTime,1,allcount,0)},matchingRoom:function(){ccUtil.modalLoading("正在为您匹配牌桌\n游戏即将开始,请耐心等待"),ZR_IO.emit("matching_room",{})},onGameEvent:function onGameEvent(){var _this2=this,self=this;ZR_IO.on("match_other",function(e,t){ccUtil.modalLoading(e.msg,{buttons:[{name:"back",handler:self.myHandler("back_hall")}]})}),ZR_IO.on("match_end",function(e,t){ccUtil.modalLoading(e.msg,{buttons:[{name:"back",handler:self.myHandler("back_hall")},{name:"go_on_match",handler:self.myHandler("go_on_match")}]})}),ZR_IO.on("game_unfinish",function(e,t){ccUtil.modalLoading(e.msg,{buttons:[{name:"back",handler:self.myHandler("back_hall")}]})}),ZR_IO.on("game_ready",function(e,t){t&&e.playerIds&&-1!=e.playerIds.indexOf(GD.playerId)&&(ZR_IO.emit("entering_room",{roomKey:e.roomKey}),ccUtil.closeModal(),ccUtil.modalLoading("匹配成功，并入房间"),playerIds=e.playerIds)}),ZR_IO.on("choose_yn",function(e,t){if(0==playerIds.indexOf(e.playerId));else{var o=playerIds.indexOf(e.playerId);_this2.wc.children[o].active=!0}}),ZR_IO.on("choose_mn",function(e,t){if(0==playerIds.indexOf(e.playerId));else{var o=playerIds.indexOf(e.playerId);_this2.wc.children[o].active=!0}}),ZR_IO.on("game_begin",function(t,e){if(e){ccUtil.closeModal(),GD.gameRoomKey=t.roomKey;var o=GD.playerId,n=playerIds.indexOf(o),i=playerIds[n];playerIds[n]=playerIds[0],playerIds[0]=i,_this2.roomKey.getComponent("cc.Label").string=t.roomInfo.roomId;for(var c=function(){_this2.userinfo[a].getChildByName("uid").getComponent("cc.Label").string=t.playersInfo[playerIds[a]].username,l=t.playersInfo[playerIds[a]].experience.toFixed(1),s=parseFloat(l),_this2.userinfo[a].getChildByName("account").getComponent("cc.Label").string=s;var e=t.playersInfo[playerIds[a]].headimg,o=_this2.mask[a].getChildByName("userhead");e&&cc.loader.load(e,function(e,t){if(t instanceof cc.Texture2D)try{o.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t,cc.Rect(0,0,129,129)),o.width=129,o.height=129}catch(e){cc.log("error",e)}})},a=0;a<playerIds.length;a++){var l,s;c()}for(a=0;a<playerIds.length;a++)usertoken.push(t.playersInfo[playerIds[a]].playerToken);ZR_IO.emit("game_begin",{}),_this2.yxks.active=!0,cc.audioEngine.play(_this2.audiosource.getComponent("audio").gamestart,!1,1);var r=cc.sequence(cc.show(),cc.scaleTo(.3,.5,.5),cc.delayTime(3),cc.hide());_this2.yxks.runAction(r)}}),ZR_IO.on("banker_roll",function(e,t){if(t){var o=_this2;for(var n in ccUtil.closeModal(),e.playersInfo)playersInfos.push(n);if(curplexperience=e.playersInfo[GD.playerId].experience.toFixed(1),console.log("curplexperience:"+curplexperience),curplexperience<480)for(var i=1;i<_this2.snatchvillagebtn.children.length-1;i++)_this2.snatchvillagebtn.children[i].getComponent(cc.Button).interactable=!1,_this2.snatchvillagebtn.children[i].opacity=127.5,_this2.snatchvillagebtn.children[i].targetOff(_this2);else if(curplexperience<720)for(i=2;i<_this2.snatchvillagebtn.children.length-2;i++)_this2.snatchvillagebtn.children[i].getComponent(cc.Button).interactable=!1,_this2.snatchvillagebtn.children[i].opacity=127.5,_this2.snatchvillagebtn.children[i].targetOff(_this2);else if(curplexperience<960)for(i=3;i<_this2.snatchvillagebtn.children.length-3;i++)_this2.snatchvillagebtn.children[i].getComponent(cc.Button).interactable=!1,_this2.snatchvillagebtn.children[i].opacity=127.5,_this2.snatchvillagebtn.children[i].targetOff(_this2);2==playerIds.length?(o.scheduleOnce(function(){console.log("1"),clock=0,allcount=e.timeout,o.schedule(o.updateTime,1,allcount,0)},0),o.scheduleOnce(function(){this.unschedule(o.updateTime),console.log("2"),clock=1,allcount=e.timeout,o.schedule(o.updateTime,1,allcount,0)},4)):3==playerIds.length?(o.scheduleOnce(function(){console.log("1"),clock=0,allcount=e.timeout,o.schedule(o.updateTime,1,allcount,0)},0),o.scheduleOnce(function(){this.unschedule(o.updateTime),console.log("2"),clock=1,allcount=e.timeout,o.schedule(o.updateTime,1,allcount,0)},4),o.scheduleOnce(function(){this.unschedule(o.updateTime),console.log("3"),clock=2,allcount=e.timeout,o.schedule(o.updateTime,1,allcount,0)},8)):4==playerIds.length&&(o.scheduleOnce(function(){console.log("1"),clock=0,allcount=e.timeout,o.schedule(o.updateTime,1,allcount,0)},0),o.scheduleOnce(function(){this.unschedule(o.updateTime),console.log("2"),clock=1,allcount=e.timeout,o.schedule(o.updateTime,1,allcount,0)},4),o.scheduleOnce(function(){this.unschedule(o.updateTime),console.log("3"),clock=2,allcount=e.timeout,o.schedule(o.updateTime,1,allcount,0)},8),o.scheduleOnce(function(){this.unschedule(o.updateTime),console.log("4"),clock=3,allcount=e.timeout,o.schedule(o.updateTime,1,allcount,0)},12))}}),ZR_IO.on("one_choosebanker",function(e,t){if(t){console.log("one_choosebanker:"+e.playerId);var o=playerIds.indexOf(e.playerId);_this2.spawnbankerOdds(o,e.odds)}}),ZR_IO.on("player_roll",function(e,t){if(t){ispc_deal=!0,_this2.snatchvillagebtn.active=!1,_this2.unschedule(_this2.updateTime);var o=playerIds.indexOf(e.banker.playerId);cattleGlobal.gtoposiX=coinposi[o].x,cattleGlobal.gtoposiY=coinposi[o].y,_this2.schedule(function(){this.spawng()},0,30,0),_this2.scheduleOnce(function(){this.userinfo[o].getChildByName("ZJTX-01").active=!0},1.5),0==playerIds.indexOf(e.banker.playerId)?_this2.waitchipin.active=!0:(_this2.chipinbtn.active=!0,curplexperience<64?(_this2.chipinbtn.getChildByName("chipinbtn1").active=!0,_this2.chipinbtn.getChildByName("chipinbtn2").active=!1,_this2.chipinbtn.getChildByName("chipinbtn3").active=!1,_this2.chipinbtn.getChildByName("chipinbtn4").active=!1,_this2.chipinbtn.getChildByName("chipinbtn5").active=!1):curplexperience<128?(_this2.chipinbtn.getChildByName("chipinbtn1").active=!1,_this2.chipinbtn.getChildByName("chipinbtn2").active=!0,_this2.chipinbtn.getChildByName("chipinbtn3").active=!1,_this2.chipinbtn.getChildByName("chipinbtn4").active=!1,_this2.chipinbtn.getChildByName("chipinbtn5").active=!1):curplexperience<192?(_this2.chipinbtn.getChildByName("chipinbtn1").active=!1,_this2.chipinbtn.getChildByName("chipinbtn2").active=!1,_this2.chipinbtn.getChildByName("chipinbtn3").active=!0,_this2.chipinbtn.getChildByName("chipinbtn4").active=!1,_this2.chipinbtn.getChildByName("chipinbtn5").active=!1):curplexperience<256?(_this2.chipinbtn.getChildByName("chipinbtn1").active=!1,_this2.chipinbtn.getChildByName("chipinbtn2").active=!1,_this2.chipinbtn.getChildByName("chipinbtn3").active=!1,_this2.chipinbtn.getChildByName("chipinbtn4").active=!0,_this2.chipinbtn.getChildByName("chipinbtn5").active=!1):(_this2.chipinbtn.getChildByName("chipinbtn1").active=!1,_this2.chipinbtn.getChildByName("chipinbtn2").active=!1,_this2.chipinbtn.getChildByName("chipinbtn3").active=!1,_this2.chipinbtn.getChildByName("chipinbtn4").active=!1,_this2.chipinbtn.getChildByName("chipinbtn5").active=!0)),_this2.spawnbankerOdds(o,e.banker.odds);for(var n=0;n<playerIds.length;n++)exceptbanker.push(playerIds[n]);if(exceptbanker.splice(o,1),e.bankerChoose)for(n=0;n<exceptbanker.length;n++){var i=playerIds.indexOf(exceptbanker[n]);_this2.spawnbankerOdds(i,e.bankerChoose[exceptbanker[n]].odds)}else for(n=0;n<exceptbanker.length;n++){i=playerIds.indexOf(exceptbanker[n]);_this2.spawnbankerOdds(i,e.plasyer[exceptbanker[n]].odds)}_this2.ddk.active=!1,allcount=e.timeout,clock=0,_this2.schedule(_this2.updateTime,1,allcount,0)}}),ZR_IO.on("one_chooseplayer",function(e,t){if(t){console.log("one_chooseplayer:"+e);var o=playerIds.indexOf(e.playerId);_this2.spawnplayerOdds(o,e.odds)}}),ZR_IO.on("deal",function(data,status){if(status){updatedata=data,_this2.unschedule(_this2.updateTime),_this2.chipinbtn.active=!1,_this2.waitchipin.active=!1,_this2.dxk.active=!0,_this2.pokerchoose.active=!0,_this2.jsk.active=!0,_this2.dealpoker();for(var i=0;i<exceptbanker.length;i++){var plindex=playerIds.indexOf(exceptbanker[i]);_this2.spawnplayerOdds(plindex,data.plasyer[exceptbanker[i]].odds)}_this2.scheduleOnce(function(){for(var _this3=this,i=0;i<5;i++)this.pokers.children[i].destroy();if(pokerfacecount=0,"string"!=typeof usertoken[0]){var ut=usertoken[0].toString();data.pokes[ut].pokes.forEach(function(item,index){if("string"==typeof item){var pf=eval("("+item+")");_this3.spawnpokerface(pf.color,pf.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount,data.roomKey),poker.push({color:pf.color,num:pf.num,pX:pokerposi[pokerfacecount].x,pY:pokerposi[pokerfacecount].y,pfc:pokerfacecount,roomKey:data.roomKey})}else _this3.spawnpokerface(item.color,item.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount,data.roomKey),poker.push({color:item.color,num:item.num,pX:pokerposi[pokerfacecount].x,pY:pokerposi[pokerfacecount].y,pfc:pokerfacecount,roomKey:data.roomKey});pokerfacecount++,(pokerfacecount+1)%5==0&&_this3.schedule(function(){})})}else data.pokes[usertoken[0]].pokes.forEach(function(item,index){if("string"==typeof item){var pf=eval("("+item+")");_this3.spawnpokerface(pf.color,pf.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount,data.roomKey),poker.push({color:pf.color,num:pf.num,pX:pokerposi[pokerfacecount].x,pY:pokerposi[pokerfacecount].y,pfc:pokerfacecount,roomKey:data.roomKey})}else _this3.spawnpokerface(item.color,item.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount,data.roomKey),poker.push({color:item.color,num:item.num,pX:pokerposi[pokerfacecount].x,pY:pokerposi[pokerfacecount].y,pfc:pokerfacecount,roomKey:data.roomKey});pokerfacecount++});var self=this;function choosepoker(){for(var l=[!1,!1,!1,!1,!1],s=[],r=[],e=0;e<5;e++)self.pokers.children[5*playerIds.length+e].on(cc.Node.EventType.TOUCH_END,function(e){cc.audioEngine.play(self.audiosource.getComponent("audio").carddone1,!1,1);var t=e.currentTarget.index;if(console.log(t),currentnum=11==poker[t].num||"J"==poker[t].num?"J":12==poker[t].num||"Q"==poker[t].num?"Q":13==poker[t].num||"K"==poker[t].num?"K":poker[t].num,l[t]){e.currentTarget.y=e.currentTarget.y-25,e.currentTarget.x=e.currentTarget.x,pokerfaceclickcount--;var o=s.indexOf(currentnum),n=r.indexOf(t);r.splice(n,1),s.splice(o,1),self.jsk.children[o].getComponent("cc.Label").string="",l[t]=!l[t]}else{e.currentTarget.y=e.currentTarget.y+25,e.currentTarget.x=e.currentTarget.x,s.push(currentnum),r.push(t);for(var i=0;i<s.length;i++)self.jsk.children[i].getComponent("cc.Label").string=s[i];pokerfaceclickcount++,l[t]=!l[t]}if(3<=pokerfaceclickcount){for(i=0;i<3;i++)self.clickpokertype(self.jsk.children[i].getComponent("cc.Label").string);self.jsk.getChildByName("AN-yn").on(cc.Node.EventType.TOUCH_END,function(){if(null!=_clickpokertype[0]&&null!=_clickpokertype[1]&&null!=_clickpokertype[2])if(self.jsk.children[3].getComponent("cc.Label").string=_clickpokertype[0]+_clickpokertype[1]+_clickpokertype[2],(_clickpokertype[0]+_clickpokertype[1]+_clickpokertype[2])%10==0){cc.audioEngine.play(self.audiosource.getComponent("audio").carddone,!1,1),self.dxk.children[0].getComponent(cc.Label).string="选牌正确",console.log(self.pokers);for(var e=0;e<5;e++)self.pokers.children[5*(playerIds.length-1)+e].destroy();var t=0;this.schedule(function(){this.ymnpokerback(pokerposi[t].x,pokerposi[t].y),t++},.02,4,0),this.schedule(function(){this.wc.children[0].active=!0},.08)}else cc.audioEngine.play(self.audiosource.getComponent("audio").montageerror,!1,1),self.dxk.children[0].getComponent(cc.Label).string="选牌错误";self.jsk.getChildByName("ynbk").active=!0,self.jsk.getChildByName("mnbk").active=!1,ZR_IO.emit("choose_yn",{playerId:GD.playerId,roomKey:data.roomKey})},self),console.log("开始取消选牌监听事件");var c=[0,1,2,3,4];console.log(r);for(i=0;i<r.length;i++){var a=c.indexOf(r[i]);c.splice(a,1)}for(i=0;i<c.length;i++)console.log(5*(playerIds.length-1)+c[i]),self.pokers.children[5*(playerIds.length-1)+c[i]].targetOff(self);console.log(c)}else choosepoker()},self),self.jsk.getChildByName("AN-mn").on(cc.Node.EventType.TOUCH_END,function(){self.jsk.getChildByName("ynbk").active=!1,self.jsk.getChildByName("mnbk").active=!0,console.log(playersInfos);if("没牛"==data.pokes[usertoken[0]].title){cc.audioEngine.play(self.audiosource.getComponent("audio").carddone,!1,1),self.dxk.children[0].getComponent(cc.Label).string="选牌正确";for(var e=0;e<5;e++)self.pokers.children[5*(playerIds.length-1)+e].destroy();var t=0;this.schedule(function(){this.ymnpokerback(pokerposi[t].x,pokerposi[t].y),t++},.02,4,0),this.schedule(function(){this.wc.children[0].active=!0},.08)}else cc.audioEngine.play(self.audiosource.getComponent("audio").montageerror,!1,1),self.dxk.children[0].getComponent(cc.Label).string="选牌错误";ZR_IO.emit("choose_mn",{playerId:GD.playerId,roomKey:data.roomKey}),cc.audioEngine.play(self.audiosource.getComponent("audio").carddone1,!1,1)},self)}choosepoker(),this.scheduleOnce(function(){for(var _this4=this,exceptchooserCurrentpl=[],i=0;i<playerIds.length;i++)exceptchooserCurrentpl.push(playerIds[i]);for(var i=0;i<alreadychoosepl.length;i++){var alreadychooseplIndex=exceptchooserCurrentpl.indexOf(alreadychoosepl[i]);exceptchooserCurrentpl.splice(alreadychooseplIndex,1)}var currentPlIndex=exceptchooserCurrentpl.indexOf(GD.playerId);exceptchooserCurrentpl.splice(currentPlIndex,1);for(var i=0;i<exceptchooserCurrentpl.length;i++){var leftInd=playerIds.indexOf(exceptchooserCurrentpl[i]);if(pokerfacecount=5*leftInd,"string"!=typeof usertoken[leftInd]){var ut=usertoken[leftInd].toString();data.pokes[ut].pokes.forEach(function(item,index){if("string"==typeof item){var pf=eval("("+item+")");_this4.spawnpokerface(pf.color,pf.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount)}else _this4.spawnpokerface(item.color,item.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount);pokerfacecount++,(pokerfacecount+1)%5==0&&_this4.schedule(function(){})})}else data.pokes[usertoken[leftInd]].pokes.forEach(function(item,index){if("string"==typeof item){var pf=eval("("+item+")");_this4.spawnpokerface(pf.color,pf.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount)}else _this4.spawnpokerface(item.color,item.num,pokerposi[pokerfacecount].x,pokerposi[pokerfacecount].y,pokerfacecount);pokerfacecount++})}},data.timeout),this.scheduleOnce(function(){for(var _this5=this,i=0;i<this.pokers.children.length;i++)this.pokers.children[i].destroy();for(var _loop2=function _loop2(){var poke=data.pokes[usertoken[s]].pokes;for(i=0;i<poke.length;i++)for(j=0;j<poke.length-1-i;j++)poke[j].num<poke[j+1].num&&(temp=poke[j],poke[j]=poke[j+1],poke[j+1]=temp);function threepoke(e){for(var t=0;t<poke.length;t++)for(var o=0;o<poke.length;o++)for(e=0;e<poke.length;e++){var n=void 0,i=void 0,c=void 0;if(n=10<poke[e].num?10:poke[e].num,i=10<poke[o].num?10:poke[o].num,c=10<poke[t].num?10:poke[t].num,e!=o&&e!=t&&o!=t)if((n+i+c)%10==0)return[t,o,e]}}var ismn=!1;for(t=0;t<usertoken.length;t++){var curarr=threepoke(t);if(null!=curarr){for(y=0;y<curarr.length;y++){var _temp=poke[y];poke[y]=poke[curarr[y]],poke[curarr[y]]=_temp}ismn=!1}else console.log("没牛"),ismn=!0}pokerfacecount=5*s,poke.forEach(function(item,index){if("string"==typeof item){var pf=eval("("+item+")");ismn?_this5.spawnpokerface(pf.color,pf.num,mnsortpoker[pokerfacecount].x,mnsortpoker[pokerfacecount].y,pokerfacecount):_this5.spawnpokerface(pf.color,pf.num,sortpokerposi[pokerfacecount].x,sortpokerposi[pokerfacecount].y,pokerfacecount)}else ismn?_this5.spawnpokerface(item.color,item.num,mnsortpoker[pokerfacecount].x,mnsortpoker[pokerfacecount].y,pokerfacecount):_this5.spawnpokerface(item.color,item.num,sortpokerposi[pokerfacecount].x,sortpokerposi[pokerfacecount].y,pokerfacecount);pokerfacecount++}),console.log(poke)},s=0;s<playerIds.length;s++){var i,j,temp,t,y;_loop2()}},data.timeout+.5),cc.audioEngine.play(this.audiosource.getComponent("audio").sendcard,!1,1),allcount=data.timeout,this.schedule(this.updateTime,1,allcount,0);var bullcount=0;this.schedule(function(){switch(data.pokes[usertoken[bullcount]].title){case"没牛":this.spawnbulltype(bullcount,0),cc.audioEngine.play(this.audiosource.getComponent("audio").cow0,!1,1);break;case"牛一":this.spawnbulltype(bullcount,1),cc.audioEngine.play(this.audiosource.getComponent("audio").cow1,!1,1);break;case"牛二":this.spawnbulltype(bullcount,2),cc.audioEngine.play(this.audiosource.getComponent("audio").cow2,!1,1);break;case"牛三":this.spawnbulltype(bullcount,3),cc.audioEngine.play(this.audiosource.getComponent("audio").cow3,!1,1);break;case"牛四":this.spawnbulltype(bullcount,4),cc.audioEngine.play(this.audiosource.getComponent("audio").cow4,!1,1);break;case"牛五":this.spawnbulltype(bullcount,5),cc.audioEngine.play(this.audiosource.getComponent("audio").cow5,!1,1);break;case"牛六":this.spawnbulltype(bullcount,6),cc.audioEngine.play(this.audiosource.getComponent("audio").cow6,!1,1);break;case"牛七":this.spawnbulltype(bullcount,7),cc.audioEngine.play(this.audiosource.getComponent("audio").cow7,!1,1);break;case"牛八":this.spawnbulltype(bullcount,8),cc.audioEngine.play(this.audiosource.getComponent("audio").cow8,!1,1);break;case"牛九":this.spawnbulltype(bullcount,9),cc.audioEngine.play(this.audiosource.getComponent("audio").cow9,!1,1);break;case"牛牛":this.spawnbulltype(bullcount,10),cc.audioEngine.play(this.audiosource.getComponent("audio").cow10,!1,1);break;case"四花牛":this.spawnbulltype(bullcount,11),cc.audioEngine.play(this.audiosource.getComponent("audio").cow11,!1,1);break;case"四炸":this.spawnbulltype(bullcount,12),cc.audioEngine.play(this.audiosource.getComponent("audio").cow13,!1,1);break;case"五小牛":this.spawnbulltype(bullcount,13),cc.audioEngine.play(this.audiosource.getComponent("audio").cow14,!1,1);break;case"五花牛":this.spawnbulltype(bullcount,14),cc.audioEngine.play(this.audiosource.getComponent("audio").cow12,!1,1);break;default:this.spawnbulltype(bullcount,0),cc.audioEngine.play(this.audiosource.getComponent("audio").montageerror,!1,1)}bullcount++},1,playerIds.length-1,data.timeout+1),this.scheduleOnce(function(){for(var i=0;i<exceptbanker.length;i++){var winfailnum=data.plasyer[exceptbanker[i]].amount.toString();if(5<winfailnum.length){var a=eval("("+winfailnum+")");a=a.toFixed(1),winfailnum=a.toString(),console.log(winfailnum)}console.log("playerId:"+exceptbanker[i],"amount:"+winfailnum),0<winfailnum&&(winfailnum="+"+winfailnum);for(var plindex=playerIds.indexOf(exceptbanker[i]),j=0;j<winfailnum.length;j++){var firstsymbol=winfailnum.charAt(0),symbol=winfailnum.charAt(j);if(3==plindex){var childindex=6-winfailnum.length;console.log(childindex),this.spawnwinfailnum(firstsymbol,symbol,plindex,childindex+j)}else this.spawnwinfailnum(firstsymbol,symbol,plindex,j)}}},data.timeout+1+playerIds.length),this.scheduleOnce(function(){var baindex=playerIds.indexOf(data.banker.playerId),bankerwinfailnum=data.banker.amount.toString();if(5<bankerwinfailnum.length){var a=eval("("+bankerwinfailnum+")");a=a.toFixed(1),bankerwinfailnum=a.toString(),console.log(bankerwinfailnum)}0<bankerwinfailnum&&(bankerwinfailnum="+"+bankerwinfailnum);for(var s=0;s<bankerwinfailnum.length;s++){var fsymbol=bankerwinfailnum.charAt(0),bsymbol=bankerwinfailnum.charAt(s);if(3==baindex){var childindex=6-bankerwinfailnum.length;console.log(childindex),this.spawnwinfailnum(fsymbol,bsymbol,baindex,childindex+s)}else this.spawnwinfailnum(fsymbol,bsymbol,baindex,s)}},data.timeout+1+playerIds.length),this.scheduleOnce(function(){var e=cc.sequence(cc.show(),cc.scaleTo(.1,.7,.7),cc.delayTime(1.5),cc.hide()),t=[];t.push(data.pokes[data.banker.token].pokeId);for(var o=0;o<exceptbanker.length;o++)t.push(data.pokes[data.plasyer[exceptbanker[o]].token].pokeId);for(o=0;o<t.length;o++)for(var n=0;n<t.length-1-o;n++)if(t[n]<t[n+1]){var i=t[n];t[n]=t[n+1],t[n+1]=i}data.pokes[data.banker.token].pokeId==t[0]?(this.ts.active=!0,this.ts.runAction(e),cc.audioEngine.play(this.audiosource.getComponent("audio").pentakill,!1,1)):data.pokes[data.banker.token].pokeId==t[playerIds.length]&&(this.tp.active=!0,this.tp.runAction(e),cc.audioEngine.play(this.audiosource.getComponent("audio").montageerror,!1,1))},data.timeout+2+playerIds.length),this.scheduleOnce(function(){this.jxyx.active=!0},data.timeout+3+playerIds.length)},5*playerIds.length*.05+1),_this2.schedule(function(){for(var e,t=0,o=0;o<playerIds.length;o++)playerIds[o]==data.banker.playerId&&(t=o);e=playerIds.indexOf(exceptbanker[coinindex]),data.pokes[data.banker.token].pokeId>data.pokes[data.plasyer[exceptbanker[coinindex]].token].pokeId?this.schedule(function(){cattleGlobal.cointoposiX=coinposi[t].x,cattleGlobal.cointoposiY=coinposi[t].y,this.spawncoin(coinposi[e].x+60*cc.randomMinus1To1(),coinposi[e].y+60*cc.randomMinus1To1())},0,Math.round(Math.abs(data.plasyer[playerIds[e]].amount)/2),0):this.schedule(function(){cattleGlobal.cointoposiX=coinposi[e].x,cattleGlobal.cointoposiY=coinposi[e].y,this.spawncoin(coinposi[t].x+60*cc.randomMinus1To1(),coinposi[t].y+60*cc.randomMinus1To1())},0,Math.round(Math.abs(data.plasyer[playerIds[e]].amount)/2),0),5<2*Math.abs(data.plasyer[playerIds[e]].amount)?cc.audioEngine.play(this.audiosource.getComponent("audio").betAll,!1,1):cc.audioEngine.play(this.audiosource.getComponent("audio").betone,!1,1),coinindex++},.05,exceptbanker.length-1,data.timeout+4+playerIds.length)}else _this2.jxyx.active=!0,ccUtil.modalLoading("游戏结算异常~~~~",{buttons:[{name:"back",handler:self.myHandler("back_hall")}]})}),ZR_IO.on("game_over",function(e,t){if(t){console.log(e);for(var o=e.userinfo,n=0;n<o.length;n++){var i=playerIds.indexOf(o[n].playerId);_this2.userinfo[i].getChildByName("account").getComponent(cc.Label).string=o[n].experience.toFixed(2)}}})},commitBankerOdds:function(){var o=this;function e(t){o.snatchvillagebtn.children[t].on(cc.Node.EventType.TOUCH_END,function(){var e;0==t?e=0:1==t?e=2:2==t?e=3:3==t&&(e=4),cc.audioEngine.play(this.audiosource.getComponent("audio").windowopen,!1,1),ZR_IO.emit("banker_choose",{playerId:GD.playerId,odds:e,roomKey:GD.roomKey}),o.snatchvillagebtn.active=!1,o.ddk.active=!0,bankerisclick=!0},o)}e(0),e(1),e(2),e(3)},chipinOdds:function(){var n=this;function e(t,o){n.chipinbtn.children[t].children[o].on(cc.Node.EventType.TOUCH_END,function(){var e=4*t+1+o;ZR_IO.emit("player_choose",{playerId:GD.playerId,odds:e}),n.chipinbtn.active=!1,cc.audioEngine.play(this.audiosource.getComponent("audio").windowopen,!1,1)},n)}e(0,0),e(0,1),e(0,2),e(0,3),e(1,0),e(1,1),e(1,2),e(1,3),e(2,0),e(2,1),e(2,2),e(2,3),e(3,0),e(3,1),e(3,2),e(3,3),e(4,0),e(4,1),e(4,2),e(4,3)},onLoad:function(){var e=window.ttt=this;cc.director.off("emit-setting-exit"),cc.director.on("emit-setting-exit",function(){e.back()}),this.data={},this.defaultscene(),this.matchingRoom(),this.commitBankerOdds(),this.chipinOdds(),this.onGameEvent(),cc.audioEngine.play(this.audiosource.getComponent("audio").windowopen,!1,1),cc.director.preloadScene("cattle",function(){cc.log("Next scene preloaded")}),this.jxyx.on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("cattle"),this.jxyx.children[0].active=!0},this)},start:function(){},update:function(e){}}),cc._RF.pop()},{cattleGlobal:"cattleGlobal"}],cattlechooseRoom:[function(e,t,o){"use strict";cc._RF.push(t,"1d429YIFGdEcZLyQgJtBuip","cattlechooseRoom");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=[{x:199,y:176},{x:604,y:175},{x:205,y:-266},{x:654,y:-268},{x:377,y:-46}];cc.Class({extends:cc.Component,properties:{layoutNode:cc.Node,bg:{url:cc.AudioClip,default:null}},loadGameRes:function(o){var n=this;cc.loader.loadRes("/hall/QZNN-DT-ZY",cc.SpriteAtlas,function(e,t){e?o&&o.call(n,!1,t,e):o&&o.call(n,!0,t)})},loadGameList:function(p){var h=this;API.get("/api/game/hall/listBygameId",{gameId:CD.gameTypes[2].gameId},function(e,t){var u=void 0,d=[],o=function(e){if("抢庄场"!=e)return"continue";var r=t[e];r.forEach(function(l,s){var o=function(){var e=cc.instantiate(u);e.position=cc.v2(f[s].x,f[s].y);var t=new cc.Node("Label"),o=t.addComponent(cc.Label);o.string="底注:"+l.bottom,o.fontSize=35,e.addChild(t),1==s||4==s?t.setPosition(cc.v2(0,100)):t.setPosition(cc.v2(-50,100));var n=new cc.Node("Label"),i=n.addComponent(cc.Label);i.string="入场:"+l.less,i.fontSize=35;var c=new cc.Color(255,235,4);if(n.color=c,e.addChild(n),4==s?n.setPosition(cc.v2(0,-100)):1==s?n.setPosition(cc.v2(10,-100)):n.setPosition(cc.v2(-50,-100)),p){var a=void 0;7==l.hallId?a="DT-FJ-XS":8==l.hallId?a="DT-FJ-CJ":9==l.hallId?a="DT-FJ-ZJ":10==l.hallId?a="DT-FJ-GJ":20==l.hallId&&(a="DT-FJ-ZZ"),a&&(e.getComponent(cc.Sprite).spriteFrame=p.getSpriteFrame(a))}h.bindScrollItemEvent(e,function(){h.enterRoom(l)}),d.push({sort:l.hallId,node:e}),d.length==r.length&&function(){d.sort(MyUtil.compareUp(d,"sort")),d.forEach(function(e){h.layoutNode.addChild(e.node)})}.call(h)};u?o():cc.loader.loadRes("prefab/roomname",cc.Prefab,function(e,t){u=t,cc.loader.setAutoRelease(t,!0),o()})})};for(var n in t)o(n)})},enterRoom:function(e){var t=GD.player.experience||0;t<e.less?ccUtil.modalTip("余额不够进入："+t):(GD.current.hallItem=e,cc.director.loadScene(CD.gameTypes[2].gameSceneName))},bindScrollItemEvent:function(e,t){var o=this,n=void 0,i=void 0;e.on(cc.Node.EventType.TOUCH_START,function(e){n=e.touch._point.x,i=e.touch._point.y,o.isTouchMove=!1}),e.on(cc.Node.EventType.TOUCH_CANCEL,function(e){o.isTouchMove=!1}),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){5<Math.max(Math.abs(e.touch._point.x-n),Math.abs(e.touch._point.y-i))&&(o.isTouchMove=!0)}),e.on(cc.Node.EventType.TOUCH_END,function(e){0==o.isTouchMove&&t&&t.call(o)})},back:function(){},getToken:function(){return GD.token=MyUtil.getQueryString("token"),GD.token},initSocketIo:function(){window.ZR_IO&&ZR_IO.destroy();window.initSocketIo({},function(e,t,o){console.log("连接结果 - ",e,o,t),0==e&&cc.director.loadScene(CD.gameTypes[1].roomListScene)})},onLoad:function(){var o=this;ccUtil.modalLoading("数据加载中..."),delete GD.current.hallItem,this.getToken(),this.initSocketIo(),ZR_IO.emit("player_info",{},function(e){console.log("playerInfo",e),e.playerInfo&&"object"==n(e.playerInfo)?(GD.player=e.playerInfo,GD.playerId=e.playerInfo.playerId,o.loadGameRes(function(e,t){e?(o.loadGameList(t),ccUtil.closeModal()):ccUtil.modalLoading("资源载入失败")})):ccUtil.modalLoading("无效Token")}),cc.director.preloadScene("cattle",function(){cc.log("Next scene preloaded")})},start:function(){}}),cc._RF.pop()},{}],coinmove:[function(e,t,o){"use strict";cc._RF.push(t,"db8b44v4KpIfYAuITaYzU3a","coinmove");var n=e("cattleGlobal");cc.Class({extends:cc.Component,properties:{},onLoad:function(){if(null!=n.cointoposiX){var e=cc.sequence(cc.moveTo(.5,cc.p(n.cointoposiX,n.cointoposiY)),cc.hide());this.node.runAction(e)}},start:function(){}}),cc._RF.pop()},{cattleGlobal:"cattleGlobal"}],config:[function(e,t,o){"use strict";cc._RF.push(t,"517208fb8pEIqlPCTMr0neV","config"),window.configData={isDebug:!0,apiServerUrl:"http://api.qisq.top",socketServer:{url:"http://socket.qisq.top"}},t.exports=null,cc._RF.pop()},{}],gmove:[function(e,t,o){"use strict";cc._RF.push(t,"7da0fEHM2RJWoQLxcmcd+uN","gmove");var n=e("cattleGlobal");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=n.gtoposiX+60*cc.randomMinus1To1(),t=n.gtoposiY+60*cc.randomMinus1To1();if(null!=n.gtoposiX){var o=cc.sequence(cc.spawn(cc.moveTo(.3,cc.p(e,t)),cc.repeatForever(cc.sequence(cc.scaleTo(.1,1.4,1.4),cc.scaleTo(.1,1,1)))),cc.hide());this.node.runAction(o)}},start:function(){}}),cc._RF.pop()},{cattleGlobal:"cattleGlobal"}],helpmove:[function(e,t,o){"use strict";cc._RF.push(t,"1fe06Taa5VBqbiU5xEbui3l","helpmove"),cc.Class({extends:cc.Component,properties:{},clickbgmove:function(e,t){console.log(t)},onLoad:function(){this.node.x,this.node.y},start:function(){}}),cc._RF.pop()},{}],pokerMove:[function(e,t,o){"use strict";cc._RF.push(t,"47111dPaKdF1pXV3NMxdyWY","pokerMove");var n=e("cattleGlobal");cc.Class({extends:cc.Component,properties:{},onLoad:function(){if(null!=n.pokerPosiX)if(1==n.needscale){var e=cc.spawn(cc.moveTo(.5,cc.p(n.pokerPosiX,n.pokerPosiY)),cc.scaleTo(.5,1.2,1.2));this.node.runAction(e)}else{e=cc.moveTo(.5,cc.p(n.pokerPosiX,n.pokerPosiY));this.node.runAction(e)}},start:function(){}}),cc._RF.pop()},{cattleGlobal:"cattleGlobal"}],setting:[function(e,t,o){"use strict";cc._RF.push(t,"e0b0d32MeFNSZsDu9UtneLO","setting"),cc.Class({extends:cc.Component,properties:{settingBtn:cc.Node,settingPanel:cc.Node,advicePage:cc.Node,setPage:cc.Node,exitPage:cc.Node,helpPage:cc.Node,paitypePage:cc.Node,recordPage:cc.Node,musicSwitchNode:cc.Node,effectSwitchNode:cc.Node,adviceEdit:cc.EditBox,musiceSlider:cc.Slider,effectSlider:cc.Slider,recordItemPrefab:cc.Prefab,recordContent:cc.Node},_emitEvent:function(e,t){cc.director.emit("emit-setting-"+e,t)},settingMain:function(e,t){this.isSettingOpen=!0===e?!!t:!this.isSettingOpen,this.isSettingOpen?this.settingPanel.active=!0:this.settingPanel.active=!1},submitAdvice:function(){var e=this.adviceEdit;e&&API.post("/api/game/feedback",{gameId:GD.current.hallItem.gameId,content:e,playerId:GD.playerId},function(e,t){e?ccUtil.modalTip():console.log(t)}),this.closeModal()},closeModal:function(){var e=this._modal;e&&(delete this._modal,e.runAction(cc.sequence(cc.scaleTo(.1,.3),cc.callFunc(function(){e.active=!1}))))},sliderCtrl:function(e,t){var o=Math.round(10*e.progress)/10;e.node.getChildByName("light").width=e.node.width*o,"music"==t?window.AudioCtrl.setMusicVolume(o):"effect"==t&&window.AudioCtrl.setEffectVolume(o)},musicSwitch:function(){this.musicOff=!this.musicOff,this.musicSwitchNode.getChildByName("on").active=!this.musicOff,this.musicSwitchNode.getChildByName("off").active=!!this.musicOff,window.AudioCtrl.muteMusic(this.musicOff)},effectSwitch:function(){this.effectOff=!this.effectOff,this.effectSwitchNode.getChildByName("on").active=!this.effectOff,this.effectSwitchNode.getChildByName("off").active=!!this.effectOff,window.AudioCtrl.muteEffect(this.effectOff)},menuCtrl:function(e,t){this.closeModal(),"exit"==t?this._modal=this.exitPage:"set"==t?this._modal=this.setPage:"record"==t?this._modal=this.recordPage:"paiType"==t?this._modal=this.paitypePage:"help"==t?this._modal=this.helpPage:"advice"==t&&(this._modal=this.advicePage),this._modal&&(this._modal.setScale(.3),this._modal.active=!0,this._modal.runAction(cc.scaleTo(.1,1)),"set"==t?this.initSet():"record"==t&&this.initRecord()),this.settingMain(!0,!1)},_showRecords:function(){var i=this;this.recordData.forEach(function(e,t){var o=cc.instantiate(i.recordItemPrefab);o.parent=i.recordContent;var n=cc.find("row_layout/money",o);0<=e.amount?(e.amount="+"+e.amount,n.color=new cc.Color(233,192,99)):n.color=new cc.Color(90,214,73),ccUtil.setLabelString(o,"row_layout/index",t+1),ccUtil.setLabelString(o,"row_layout/room",e.hallName),ccUtil.setLabelString(o,"row_layout/money",e.amount),ccUtil.setLabelString(o,"row_layout/time",e.recordTime)})},_getRecordData:function(){var o=this;API.post("/api/user/queryStatements",{gameId:GD.current.hallItem.gameId,pageSize:10,currentPageNum:this.recordPageNum},function(e,t){e&&t&&(o.recordPageNum++,o.recordData=o.recordData.concat(t.logs),o._showRecords())})},initRecord:function(){this.recordPageNum=1,this.recordData=[],this.recordContent.removeAllChildren(),this._getRecordData()},initSet:function(){this.musiceSlider.progress=1*GD.setting.musicVolume,this.effectSlider.progress=1*GD.setting.effectVolume,this.musicLightBarWidget.right=1-this.musiceSlider.progress,this.effectLightBarWidget.right=1-this.effectSlider.progress,this.musicOff=GD.setting.isMusicMute,this.effectOff=GD.setting.isEffectMute,this.musicSwitchNode.getChildByName("on").active=!this.musicOff,this.musicSwitchNode.getChildByName("off").active=!!this.musicOff,this.effectSwitchNode.getChildByName("on").active=!this.effectOff,this.effectSwitchNode.getChildByName("off").active=!!this.effectOff},exitCancel:function(){this.closeModal()},exitSure:function(){this._emitEvent("exit"),this.closeModal()},onLoad:function(){(window.ttt=this).musicLightBarWidget=this.musiceSlider.node.getChildByName("light").getComponent(cc.Widget),this.effectLightBarWidget=this.effectSlider.node.getChildByName("light").getComponent(cc.Widget)},onDestroy:function(){cc.audioEngine.stopAll()}}),cc._RF.pop()},{}]},{},["build_main","config","Audio","Base64","EventAudio","EventStop","setting","audio","cattleGlobal","cattleInit","cattlechooseRoom","coinmove","gmove","helpmove","pokerMove"]);